<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>AWS Certified Sysops Administrator - Associate Road Map | Recording</title>
  <meta name="author" content="jibing57">
  
  <meta name="description" content="AWS, 阅读, Architecture, PostgreSQL">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="AWS Certified Sysops Administrator - Associate Road Map"/>
  <meta property="og:site_name" content="Recording"/>

  
    <meta property="og:image" content="undefined"/>
  

  
  
    <link href="/favicon.png" rel="icon">
  

  <!-- CSS -->
  <link rel="stylesheet" href="/css/themes/bootstrap.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/comment.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>
  
  <!-- analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-111771042-1', 'auto');
  ga('send', 'pageview');
</script>



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?59d3e14cdc96877383afed646f44d216";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


</head>

 <body>  
  <nav id="main-nav" class="navbar  navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
       <a class="navbar-brand" href="/">Recording</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		  <li>
			<a href="/douban" title="Douban">
			  <i class="fa fa-book"></i>Douban
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 


	
		<div class="page-header ">		
			<h1 class="title "> AWS Certified Sysops Administrator - Associate Road Map</h1>
		</div>		
	




   <style type="text/css">
           img, video {
                -webkit-box-shadow:0 0 10px rgba(0, 0, 0, .5);  
                -moz-box-shadow:0 0 10px rgba(0, 0, 0, .5);  
                box-shadow:0 0 10px rgba(0, 0, 0, .5);  
           }
   </style>



<div class="row post">
	<!-- cols -->
	
	<div id="top_meta"></div>
	<div class="col-md-9">
	

	<!-- content -->
	<div class="mypage">		
	  		

	  <h2 id="Official-AWS-Certification-Page"><a href="#Official-AWS-Certification-Page" class="headerlink" title="Official AWS Certification Page"></a>Official AWS Certification Page</h2><p>访问官网<a href="https://amazonaws-china.com/certification/certification-prep/" target="_blank" rel="external">AWS Certification</a></p>
<ul>
<li>参加 AWS 培训课程</li>
<li>查看考试指南和样题<ul>
<li>了解考试涉及的概念并整体了解需要学习哪些内容, <a href="http://awstrainingandcertification.s3.amazonaws.com/production/AWS_certified_sysops_associate_blueprint.pdf" target="_blank" rel="external">AWS Certified SysOps Administrator - Associate 考试指南</a> 相当于考试大纲, 必看,而且需要反复的看。因为学习过一阵后再来看Guide，会有更深的体会。</li>
<li><a href="http://awstrainingandcertification.s3.amazonaws.com/production/AWS_certified_sysops_associate_examsample.pdf" target="_blank" rel="external">考试样题</a>用于熟悉题目题型</li>
</ul>
</li>
<li>完成自主进度动手实验和备考任务<ul>
<li>官方<a href="https://www.qwiklabs.com/learning_paths/20/lab_catalogue?locale=en" target="_blank" rel="external">qwikLABS 任务</a>提供了一系列动手实验, 提供部分免费实验，但大部分实验所需的积分都需要购买。高性价比的做法是， 注册一个AWS全球账号，使用一年的免费额度来对照着实验手册来进行试验。</li>
</ul>
</li>
<li>学习 AWS 白皮书<ul>
<li>白皮书是纯英文的，而且每个白皮书篇幅都很长，读起来既费时又枯燥。但是有时间还是建议把推荐的几个都看一下。</li>
</ul>
</li>
<li>查看 AWS 常见问题</li>
<li>参加模拟考试<ul>
<li>20美刀一次，主要目的是为了让人熟悉考试时上机的流程。是否需要因人而异, 特别想先熟悉下考试流程的可以考虑参加一次。我个人觉得没有必要, 因为真实考试时，操作界面一目了然，没有磕磕绊绊的机关，省下20美刀可以去买一份课程。</li>
</ul>
</li>
<li>报名考试并获得认证<ul>
<li>登陆<a href="https://www.aws.training/certification" target="_blank" rel="external">https://www.aws.training/certification</a>注册进行考试<a id="more"></a>
</li>
</ul>
</li>
</ul>
<h2 id="考试指南"><a href="#考试指南" class="headerlink" title="考试指南"></a>考试指南</h2><p><a href="http://awstrainingandcertification.s3.amazonaws.com/production/AWS_certified_sysops_associate_blueprint.pdf" target="_blank" rel="external">AWS Certified SysOps Administrator - Associate 考试指南</a> 读三遍，读三遍，读三遍</p>
<p>各个Domain的分数比例如下:<br><img src="/images/AWS/Sysops/Domain_on_sysops_admin_associate_blueprint.jpg" alt="Domain_on_sysops_admin_associate_blueprint"></p>
<h2 id="视频学习"><a href="#视频学习" class="headerlink" title="视频学习"></a>视频学习</h2><p><a href="https://acloud.guru" target="_blank" rel="external">Acloudguru</a> 中<a href="https://acloud.guru/course/aws-certified-sysops-administrator-associate/dashboard" target="_blank" rel="external">aws-certified-sysops-administrator-associate</a>视频的学习</p>
<h3 id="要点摘录"><a href="#要点摘录" class="headerlink" title="要点摘录"></a>要点摘录</h3><h4 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h4><ul>
<li>Introduction</li>
<li>Monitoring, Metrics &amp; Analysis</li>
<li>High Availability</li>
<li>Deployment &amp; Provisioning</li>
<li>Data Management</li>
<li>OpsWorks</li>
<li>Security</li>
<li>Networking</li>
<li>VPCs</li>
</ul>
<h4 id="Monitoring-Metrics-amp-Analysis"><a href="#Monitoring-Metrics-amp-Analysis" class="headerlink" title="Monitoring, Metrics &amp; Analysis"></a>Monitoring, Metrics &amp; Analysis</h4><ul>
<li><p>CloudWatch</p>
<ul>
<li><p>Amazon CloudWatch is a monitoring service to monitor your AWS resources, as well as the applications that you run on AWS.</p>
</li>
<li><p>CloudWatch can monitor things like :</p>
<ul>
<li>Compute<ul>
<li>Autoscaling Groups</li>
<li>Elastic Load Balancers</li>
<li>Route53 Health Checks</li>
</ul>
</li>
<li>Storage &amp; Content Delivery<ul>
<li>EBS Volumes</li>
<li>Storage Gateways</li>
<li>CloudFront</li>
</ul>
</li>
<li>Database &amp; Analytics<ul>
<li>DynamoDB</li>
<li>Elasticache Nodes</li>
<li>RDS Instances</li>
<li>Elastic MapReduce Job Flows</li>
<li>Redshift</li>
</ul>
</li>
<li>Other<ul>
<li>SNS Topics</li>
<li>SQS Queues</li>
<li>Opsworks</li>
<li>CloudWatch Logs</li>
<li>Estimated Charges on your AWS Bill</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>CloudWatch and EC2</p>
<ul>
<li>Host Level Metrics Consist of:<ul>
<li>CPU</li>
<li>Network</li>
<li>Disk</li>
<li>Status Check</li>
</ul>
</li>
<li>RAM Utilization is a custom metric! By default EC2 monitoring is 5 minute intervals, unless you enable detailed monitoring which will then make it 1 minute intervals.</li>
<li><a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/ec2-metricscollected.html" target="_blank" rel="external">EC2 Metric</a><ul>
<li>CPUCreditUsage - Units: Count</li>
<li>CPUCreditBalance - Units: Count</li>
<li>CPUUtilization - Units: Percent</li>
<li>DiskReadOps - Units: Count</li>
<li>DiskWriteOps - Units: Count</li>
<li>DiskReadBytes - Units: Bytes</li>
<li>DiskWriteBytes - Units: Bytes</li>
<li>NetworkIn - Units: Bytes</li>
<li>NetworkOut - Units: Bytes</li>
<li>NetworkPacketsIn - Units: Count</li>
<li>NetworkPacketsOut - Units: Count</li>
<li>StatusCheckFailed - Units: Count</li>
<li>StatusCheckFailed_Instance - Units: Count</li>
<li>StatusCheckFailed_System - Units: Count</li>
</ul>
</li>
<li><a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/ec2-metricscollected.html" target="_blank" rel="external">EC2 Dimension</a><br>  If you’re using Detailed Monitoring, you can filter the EC2 instance data using any of the dimensions in the following table.<ul>
<li>AutoScalingGroupName</li>
<li>ImageId</li>
<li>InstanceId</li>
<li>InstanceType</li>
</ul>
</li>
<li>By Default - CloudWatch Metric stored 2 Weeks. You can retrieve data that is longer than 2 weeks using the GetMetricStatistics API or by using third party tools offered by AWS partners.</li>
<li>You can retrieve data from any terminated EC2 or ELB instance for up to 2 weeks after it’s termination.</li>
</ul>
</li>
<li><p>Metric Granularity</p>
<ul>
<li>It depends on the AWS service. Many default metrics for many default services are 1 minute, but it can be 3 or 5 minutes depending on the service.</li>
<li>Exam Tips: For custom metric the minimum granularity that you can have is 1 minute.</li>
</ul>
</li>
<li><p>CloudWatch Alarms</p>
<ul>
<li>You can create an alarm to monitor any Amazon CloudWatch metric in your account. This can include EC2 CPU Utilization, Elastic Loa Balancer Latency of even the charges on your AWS bill. You can set the appropriate thresholds in which to trigger the alarms and also set what actions should be taken if an alarm state is reached. This will be covered in a subsequent lecture.</li>
</ul>
</li>
<li><p>EC2 Status check</p>
<ul>
<li>System Status Check (Checks Host, underlying physical Host)<ul>
<li>Loss of network connectivity</li>
<li>Loss of system power</li>
<li>Software issues on the physical host</li>
<li>Hardware issues on the physical host</li>
<li>Best way to resolve issues is to stop and then start the VM again.</li>
</ul>
</li>
<li>Instance Status Check (Checks VM)<ul>
<li>Failed system status checks</li>
<li>Misconfigured networking or startup configuration</li>
<li>Exhausted memory</li>
<li>Corrupted file system</li>
<li>Incompatible kernel</li>
<li>Best way to trouble shoot is by rebooting the instance or by making modifications in your operating system.</li>
</ul>
</li>
</ul>
</li>
<li><p>Custom Metrics</p>
<ul>
<li>AWS Namespaces</li>
<li>Custom Namespaces (the custom metric is selected in this namespace)</li>
</ul>
</li>
<li><p>Monitoring EBS</p>
<ul>
<li>4 Different Types of EBS Storage<ul>
<li>General Purpose (SSD) - gp2</li>
<li>Provisioned IOPS(SSD) - io1</li>
<li>Throughput Optimized(HDD) - st1</li>
<li>Cold (HDD) - sc1</li>
</ul>
</li>
<li><p><a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSVolumeTypes.html" target="_blank" rel="external">Compare with each volumes type</a><br>  <img src="/images/AWS/Sysops/volumes_type_of_EBS.png" alt="volumes_type_of_EBS"></p>
</li>
<li><p>IOPS &amp; Volumes</p>
<ul>
<li>General Purpose SSD volumes have a base of 3 IOPS per/GiB of volume size.<ul>
<li>Maximum volume size of 16,384 GiB</li>
<li>Maximum IOPS Size of 10,000 IOPS Total (after that you need to move to provisioned IOPS)</li>
</ul>
</li>
</ul>
</li>
<li>IOPS &amp; Volumes Examples<ul>
<li>Say we have a 1 GiB Volume. We get 3 IOPS per Gb so we have 3*1=3 IOPS</li>
<li>We can burst performance on this volume up to 3000 IOPS if we want</li>
<li>Using I/O Credits</li>
<li>The burst would be 2997 IOPS( 3000 - 3)</li>
</ul>
</li>
<li>I/O Credits<ul>
<li>When your volume requires more than the baseline performance I/O level, it simply uses I/O credits in the credit balance to burst to the required performance level, up to a maximum of 3,000 IOPS.<ul>
<li>Each volume receives an initial I/O credit balance of 5,400,000 I/O credits.</li>
<li>This is enough to sustain the maximum burst performance of 3,000 IOPS for 30 minutes.</li>
<li>When you are not going over your provisioned IO level(ie bursting) you will be earning credits.</li>
</ul>
</li>
</ul>
</li>
<li>I/O Credits - it is beyond the scope of the SysOps Associate Exam to be able to calculate this.<br><img src="/images/AWS/Sysops/IO_credits_of_EBS.jpg" alt="IO_credits_of_EBS"></li>
<li><a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-initialize.html" target="_blank" rel="external">Pre-Warming EBS Volumes</a><ul>
<li>New EBS volumes receive their maximum performance the moment that they are available and do not require initialization (formerly known as pre-warming). However, storage blocks on volumes that were restored from snapshots must be initialized (pulled down from Amazon S3 and written to the volume) before you can access the block. This preliminary action takes time and can cause a significant increase in the latency of an I/O operation the first time each block is accessed. For most applications, amortizing this cost over the lifetime of the volume is acceptable. Performance is restored after the data is accessed once.</li>
<li>You can avoid this performance hit in a production environment by reading from all of the blocks on your volume before you use it; this process is called initialization. For a new volume created from a snapshot, you should read all the blocks that have data before using the volume.</li>
</ul>
</li>
<li><a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/monitoring-volume-status.html" target="_blank" rel="external">EBS CloudWatch Metrics</a><br>  <img src="/images/AWS/Sysops/ebs_cloudwatch_metric.png" alt="ebs_cloudwatch_metric"></li>
<li><a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/monitoring-volume-status.html" target="_blank" rel="external">Volume Status Checks</a><br>  <img src="/images/AWS/Sysops/volume_status_check_EBS.jpg" alt="volume_status_check_EBS"><ul>
<li>Exam Tips<ul>
<li>Degraded or Severely Degraded = Warning</li>
<li>Stalled or Not Available = Impaired</li>
</ul>
</li>
</ul>
</li>
<li><a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-modify-volume.html" target="_blank" rel="external">Modifying EBS Volumes</a><ul>
<li>If your Amazon EBS volume is attached to a current generation EC2 instance type, you can increase its size, change its volume type, or (for an io1 volume) adjust its IOPS performance, all without detaching it. You can apply these changes to detached volumes as well.<ul>
<li>Issue the modification command (console or command line)</li>
<li>Monitor the progress of the modification</li>
<li>If the size of the volume was modified, extend the volume’s file system to take advantage of the increased storage capacity.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Monitoring RDS</p>
<ul>
<li>Two Type of monitoring available for RDS<ul>
<li>CloudWatch - In CloudWatch you can monitor RDS by Metrics.</li>
<li>RDS itself - In RDS itself, you can monitor RDS by Events.</li>
</ul>
</li>
<li><a href="http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/CHAP_Monitoring.html" target="_blank" rel="external">RDS Metrics</a><ul>
<li>BinLogDiskUsage - Units: Bytes</li>
<li>CPUUtilization - Units: Percent</li>
<li><strong>DatabaseConnections</strong> - Units: Count</li>
<li><strong>DiskQueueDepth</strong> - Units: Count</li>
<li>FreeableMemory - Units: Bytes</li>
<li><strong>FreeStorageSpace</strong> - Units: Bytes</li>
<li><strong>ReplicaLag</strong> - Units: Seconds</li>
<li>SwapUsage - Units: Bytes</li>
<li><strong>ReadIOPS</strong> - Units: Count/Second</li>
<li><strong>WriteIOPS</strong> - Units: Count/Second</li>
<li><strong>ReadLatency</strong> - Units: Seconds</li>
<li><strong>WriteLatency</strong> - Units: Seconds</li>
<li>ReadThroughput - Units: Bytes/Second</li>
<li>WriteThroughput - Units: Bytes/Second</li>
<li>NetworkReceiveThroughput - Units: Bytes/second</li>
<li>NetworkTransmitThroughput - Units: Bytes/second</li>
</ul>
</li>
<li>Have a general idea of what each metric does. You do not need to know the name of each metric, but pay attention to the ones in bold.</li>
</ul>
</li>
<li><p>Monitoring ELB</p>
<ul>
<li>ELB - Every 60 seconds (Provided there is traffic)<br>Elastic Load Balancing only reports when requests are flowing through the load balancer. If there are no requests or data for a given metric, the metric will not be reported to CloudWatch. If there are requests flowing through the load balancer, Elastic Load Balancing will measure and send metrics for that load balancer in 60 second intervals</li>
<li><a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/elb-metricscollected.html" target="_blank" rel="external">ELB Metrics</a><br>  <img src="/images/AWS/Sysops/ELB_Metric.png" alt="ELB_Metric"><ul>
<li>Have a general idea of what each metric does. You do not need to know the name of each metric, but pay attention to <strong>SurgeQueueLength</strong> &amp; <strong>SpilloverCount</strong>.</li>
</ul>
</li>
</ul>
</li>
<li><p>Monitoring Elasticache</p>
<ul>
<li>Two engines<ul>
<li>Memcached</li>
<li>Redis</li>
</ul>
</li>
<li><a href="https://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/CacheMetrics.WhichShouldIMonitor.html" target="_blank" rel="external">Four important things</a><ul>
<li>CPU Utilization</li>
<li>Swap Usage</li>
<li>Evictions</li>
<li>Concurrent Connections</li>
</ul>
</li>
<li>CPU Utilization<ul>
<li>Memcached<ul>
<li>Multi-threaded</li>
<li>Can handle loads of up to 90%. If it exceeds 90% add more nodes to the cluster</li>
</ul>
</li>
<li>Redis<ul>
<li>Not multi-threaded. To determine the point in which to scale, take 90 and divide by the number of cores</li>
<li>For example, suppose you are using a cache.m1.xlarge node, which has four cores. In this case, the threshold for CPU Utilization would be (90/4), or 22.5%</li>
</ul>
</li>
<li>You will not have to calculate Redis CPU Utilization in the exam.</li>
</ul>
</li>
<li>Swap Usage<ul>
<li>Put simply, swap usage is simply the amount of the Swap file that is used. The Swap File (or Paging File) is the amount of disk storage space reserved on disk if your computer runs out of ram. Typically the size of the swap file = the size of the RAM. So if you have 4Gb of RAM, you will have a 4 GB Swap File.</li>
<li>Memcached<ul>
<li>Should be around 0 most of the time and should not exceed 50Mb.</li>
<li>If this exceeds 50Mb you should increase the memcached_connections_overhead parameter.</li>
<li>The memcached_connections_overhead defines the amount of memory to be reserved for memcached connections and other miscellaneous overhead.</li>
<li>Learn More: <a href="https://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/ParameterGroups.Memcached.html" target="_blank" rel="external">https://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/ParameterGroups.Memcached.html</a></li>
</ul>
</li>
<li>Redis<ul>
<li>No SwapUsage metric, instead use reserved-memory</li>
</ul>
</li>
</ul>
</li>
<li>Evictions<ul>
<li>Think of evictions like tenants in an apartment building. There are a number of empty apartments that slowly fill up with tenants. Eventually the apartment block is full, however more tenants need to be added.</li>
<li>An Eviction occurs when a new item is added and an old item must be removed due to lack of free space in the system.</li>
<li>Memcached<ul>
<li>There is no recommended setting. Choose a threshold based off your application</li>
<li>Either Scale up (ie increase the memory of existing nodes) OR</li>
<li>Scale Out (add more nodes)</li>
</ul>
</li>
<li>Redis<ul>
<li>There is no recommended setting. Choose a threshold based off your application.</li>
<li>scale your cluster up by using a larger node type.</li>
</ul>
</li>
<li>This can be an exam question. Remember the different approaches between Memcached &amp; Redis</li>
</ul>
</li>
<li>Concurrent Connections<ul>
<li>Memcached &amp; Redis<ul>
<li>There is no recommended setting. Choose a threshold based off your application</li>
<li>If there is a large and sustained spike in the number of concurrent connections this can either mean a large traffic spike OR your application is not releasing connections as it should be</li>
</ul>
</li>
<li>This can be an exam question. Remember to set an alarm on the number of concurrent connections for elasticache.</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>Centralized Monitoring<br>  Most enterprises have monitoring solutions such as Zennos, Nimsoft,Splunk, IBM Tivoli, HP Operations Manager etc. These usually involve installing agents on the servers to be monitored and then allowing these agents to report metrics back to the centralized monitoring server.</p>
<ul>
<li>Protocol<ul>
<li>Depends on what is being monitored. Most basic monitoring is going to use ICMP</li>
<li>Could be SQL (1433) or MySQL (3306)</li>
<li>Exam Tip: This can come up in several areas of the exam. This could include either inside your own VPC or a VPC that is connected to your on premise data center. Remember to allow ICMP/Specific Ports to either a specific IP address or a specific range of IP Addresses.</li>
</ul>
</li>
</ul>
</li>
<li><p>AWS Organizations &amp; Consolidated Billing</p>
<ul>
<li>AWS Organizations<br>  AWS Organizations is an account management service that enables you to consolidate multiple AWS accounts into an organization that you create and centrally manage.<ul>
<li>Available in two feature sets:<ul>
<li>Consolidated Billing</li>
<li>ALL Features</li>
</ul>
</li>
<li>consist of<ul>
<li>Root</li>
<li>Organization Unit (OU)</li>
<li>AWS Account</li>
</ul>
</li>
</ul>
</li>
<li>Consolidated Billing<ul>
<li>Accounts<ul>
<li>Paying Account (Paying account is independent. Cannot access resources of the other accounts)</li>
<li>Linked Accounts (All linked accounts are independent)</li>
</ul>
</li>
<li>Advantages<ul>
<li>One bill per AWS account</li>
<li>Very easy to track charges and allocate costs</li>
<li>Volume pricing discount</li>
</ul>
</li>
<li>S3 pricing</li>
<li>Reserved EC2 Instances</li>
<li>Best Practices<ul>
<li>Always enable multi-factor authentication on root account.</li>
<li>Always use a strong and complex password on root account.</li>
<li>Paying account should be used for billing purposes only. Do not deploy resources in to paying account.</li>
</ul>
</li>
<li>Notes<ul>
<li>Linked Accounts<ul>
<li>20 linked accounts only</li>
<li>To add more visit <a href="https://aws-portal.amazon.com/gp/aws/html-forms-controller/contactus/aws-account-and-billing" target="_blank" rel="external">https://aws-portal.amazon.com/gp/aws/html-forms-controller/contactus/aws-account-and-billing</a></li>
</ul>
</li>
<li>Billing Alerts<ul>
<li>When monitoring is enabled on the paying account the billing data for all linked accounts is included</li>
<li>You can still create billing alerts per individual account</li>
</ul>
</li>
<li>CloudTrail<ul>
<li>Per AWS Account and is enabled per region.</li>
<li>Can consolidate logs using an S3 bucket.<ol>
<li>Turn on CloudTrail in the paying account</li>
<li>Create a bucket policy that allows cross account access</li>
<li>Turn on CloudTrail in the other accounts and use the bucket in the paying account</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
<li>Exam Tips:<ul>
<li>Consolidated billing allows you to get volume discounts on all your accounts.</li>
<li>Unused reserved instances for EC2 are applied across the group.</li>
<li>CloudTrail is on a per account and per region basis but can be aggregate in to a single bucket in the paying account.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>EC2 Cost Optimization<ul>
<li>EC2 Instance Types<ul>
<li>On Demand</li>
<li>Reserved</li>
<li>Spot Price</li>
</ul>
</li>
<li>Spot Instances<br>  Spot Instances allow you to name your own price for Amazon EC2 computing capacity. You simply bid on spare Amazon EC2 instances and these will run automatically whenever your bid exceeds the current Spot Price, which varies in real-time based on supply and demand. If your bid goes below the spot price after these instances are provisioned, your instances will automatically be terminated.</li>
<li>On Demand<ul>
<li>On-Demand Instances let you pay for compute capacity by the hour with no long-term commitments or upfront payments. You can increase or decrease your compute capacity depending on the demands of your application and only pay the specified hourly rate for the instances you use. Amazon EC2 always strives to have enough On-Demand capacity available to meet your needs, but during periods of very high demand, it is possible that you might not be able to launch specific On-Demand instance types in specific Availability Zones for short periods of time.</li>
</ul>
</li>
<li>Reserved<ul>
<li>Reserved Instances provide you with a significant discount (up to 75%) compared to On-Demand Instance pricing. You are assured that your Reserved Instance will always be available for the operating system (e.g. Linux/UNIX or Windows) and Availability Zone in which you purchased it. For applications that have steady state needs, Reserved Instances can provide significant savings compared to using On-Demand Instances. Functionally, Reserved Instances and On-Demand Instances perform identically.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="High-Availability"><a href="#High-Availability" class="headerlink" title="High Availability"></a>High Availability</h4><ul>
<li>Elasticity and Scalability<ul>
<li>What is Elasticity<ul>
<li>Think of elasticity as a rubber band. Elasticity allows you to stretch out and retract back your infrastructure, based on your demand.</li>
<li>Under this model you only pay for what you need.</li>
<li>Elasticity is used during a short time period, such as hours or days.</li>
</ul>
</li>
<li>What is Scalability<ul>
<li>Scalability is used to talk about building out the infrastructure to meet your demands long term.</li>
<li>Scalability is used over longer time periods, such as weeks, days, months and years.</li>
</ul>
</li>
<li>AWS Services - Scalability vs Elasticity<ul>
<li>EC2<ul>
<li>Scalability - Increase Instance Sizes as required, using reserved instances</li>
<li>Elasticity - Increase the number of EC2 instances, based on autoscaling</li>
</ul>
</li>
<li>DynamoDB<ul>
<li>Scalability - Unlimited amount of storage</li>
<li>Elasticity - Increase additional IOPS for additional spikes in traffic. Decrease that IOPS after the spike.</li>
</ul>
</li>
<li>RDS<ul>
<li>Scalability - Increase instance size, eg from small to medium</li>
<li>Elasticity - not very elastic, can’t scale RDS based on demand</li>
</ul>
</li>
<li>Automated Elasticity + Scalability<br>  <img src="/images/AWS/Sysops/aws_automated_elasticity_scalability.jpg" alt="aws_automated_elasticity_scalability"></li>
</ul>
</li>
</ul>
</li>
<li>Scale Up or Scale Up<ul>
<li>Scaling Up - 向上升级<ul>
<li>Traditional IT - increases the number of processors, the number of RAM or the amount of storage.</li>
<li>EC2 - increase th instance type from say T1.micro to T2.small, T2.medium etc</li>
</ul>
</li>
<li>Scaling Out - 横向扩展<ul>
<li>Traditionally - adding more resources (such as webservers)</li>
<li>EC2 - adding additional EC2 Instances and using autoscaling.</li>
</ul>
</li>
<li>In the exam<ul>
<li>Eliminate the obviously incorrect answers</li>
<li>ask yourself where the bottle neck is? Is it network related? If so it’s probably a scale up answer.</li>
<li>Is the problem in relation to not having enough resources (ie you can’t increase the instance size further)? If so, it’s probably a scale out answer.</li>
<li>Remember elasticity. Scaling out, you can scale back. Scaling up is easy, scaling down is not so easy.</li>
</ul>
</li>
</ul>
</li>
<li>RDS Multi-AZ Failover<ul>
<li>Introduction<ul>
<li>Multi-AZ deployments for the MySQL, Oracle and PostgreSQL engines utilize synchronous physical replication to keep data on the standby up-to-date with the primary.</li>
<li>Mylti-AZ deployments for the SQLServer engine use synchronous logical replication to achieve the same result, employing SQL Server-native Mirroring technology.</li>
<li>Both approaches safeguard your data in the event of a DB Instance failure or loss of an Availability Zone.</li>
</ul>
</li>
<li>RDS Multi-AZ Failover Advantages<ul>
<li>High availability</li>
<li>Backups are taken from secondary which avoids I/O suspension to the primary</li>
<li>Restore’s are taken from secondary which avoids I/O suspension to the primary</li>
<li>Exam Tip: You can <strong>force</strong> a failover from one AZ to another by rebooting your instance. This can be done through the AWS Management console or by using RebootDbInstance API call.</li>
</ul>
</li>
<li>RDS Multi-AZ Failover is not a scaling solution</li>
<li>Read Replica’s are used to scale</li>
</ul>
</li>
<li>RDS Read Replicas<ul>
<li>What are Read Replica<ul>
<li>Read Replicas make it easy to take advantage of supported engine’s built-in replication functionality to elastically scale out beyond the capacity constraints of a single DB Instance for read-heave database workloads.</li>
<li>Read only copies of your database.</li>
<li>You can create a Read Replica with a few clicks in the AWS Management Console or using the CreateDBInstanceReadReplica API. Once the Read Replica is created, database updates on the source DB Instance will be replicated using a supported engine’s native, asynchronous replication. You can create multiple Read Replicas for a given source DB Instance and distribute your application’s read traffic amongst them.</li>
</ul>
</li>
<li>When would you use read replica’s<ul>
<li>Scaling beyond the compute or I/O capacity of a single DB Instance for read-heavy database workloads. This excess read traffic can be directed to one or more Read Replicas</li>
<li>Serving read traffic while the source DB Instance is unavailable. If your source DB Instance cannot take I/O requests (e.g. due to I/O suspension for backups or scheduled maintenance), you can direct read traffic to your Read Replica</li>
<li>Business reporting or data warehousing scenarios; you may want business reporting queries to run against a Read Replica, rather than your primary, production DB Instance.</li>
</ul>
</li>
<li>Supported Versions<ul>
<li>MySQL</li>
<li>PostgreSQL</li>
<li>MariaDB<ul>
<li>For all 3 Amazon uses these engines native asynchronous replication to update the read replica</li>
</ul>
</li>
<li>Aurora<ul>
<li>Aurora employees an SSD-backed virtualized storage layer purpose-built for database workloads. Amazon Aurora replica share the same underlying storage as the source instance, lowering costs and avoiding the need to copy data to the replica nodes.</li>
</ul>
</li>
</ul>
</li>
<li>Creating Read Replicas<ul>
<li>When creating a new Read Replica, AWS will take a snapshot of your database.</li>
<li>If Multi-AZ is not enabled:<ul>
<li>This snapshot will be of your primary database and can cause brief I/O suspension for around 1 minute.</li>
</ul>
</li>
<li>If Multi-AZ is enabled:<ul>
<li>The snapshot will be of your secondary database and you will not experience any performance hits on your primary database.</li>
</ul>
</li>
</ul>
</li>
<li>Connecting to Read Replica<ul>
<li>When a new read replica is created you will be able to connect to it using a new end point DNS address.</li>
</ul>
</li>
<li>Read Replica’s Can Be Promoted<ul>
<li>You can promote a read replica to it’s own standalone database. Doing this will break the replication link between the primary and the secondary.</li>
</ul>
</li>
<li>Exam Tips - 1<ul>
<li>You can have up to 5 read replicas for MySQL, PostgreSQL &amp; MariaDB</li>
<li>You can have read replicas in different Regions for all engines</li>
<li>Replication is Asynchronous</li>
<li>Read Replica’s can be built off Multi-AZ’s databases</li>
<li>But Read Replica’s themselves cannot be Multi-AZ currently</li>
<li>You can have Read Replica’s of Read Replica’s beware of latency</li>
<li>DB Snapshots and Automated backups cannot be taken of read replicas</li>
<li>Key Metric to look for is Replica Lag</li>
<li><strong>Know the difference between read replicas and multi-AZ</strong></li>
</ul>
</li>
<li>Exam Tips - 2<ul>
<li>If you can’t create a Read Replica, you most likely have disabled Database backups. Modify the database and turn them on.</li>
<li>You can create read replicas of read replicas in multiple Regions</li>
<li>You can either modify the database itself or create a new database from a snapshot</li>
<li>Endpoints will NOT change if you modify a database, they will change if you create a new database from a snap or if you create a read replica</li>
<li>You can manually fail over a Multi-AZ database from one AZ to another by rebooting it.</li>
</ul>
</li>
</ul>
</li>
<li><p>Bastion Hosts &amp; High Availability</p>
<ul>
<li>What is a Bastion Host<ul>
<li>A bastion host is a security measure that you can implement which acts as a gateway between you and your EC2 instances. The bastion host helps to reduce attack vectors on your infrastructure and means that you only have to harden 1 or 2 EC2 instances, rather than your entire fleet.</li>
</ul>
</li>
</ul>
</li>
<li><p>Troubleshooting Autoscaling</p>
<ul>
<li>Instances not launching in to Autoscaling Groups<br>  Below is a list of things to look for if your instances are not launching in to an autoscaling group:<ul>
<li>Associate Key Pair does not exist</li>
<li>Security group does not exist</li>
<li>Autoscaling config is not working correctly</li>
<li>Autoscaling group not found</li>
<li>Instance type specified is not supported in the AZ</li>
<li>AZ is no longer supported</li>
<li>Invalid EBS device mapping</li>
<li>Autoscaling service is not enabled on your account</li>
<li>Attempting to attach and EBS block device to an instance-store AMI</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="Deployment-and-Provisioning"><a href="#Deployment-and-Provisioning" class="headerlink" title="Deployment and Provisioning"></a>Deployment and Provisioning</h4><ul>
<li><p>Services with root/admin access to Operating System</p>
<ul>
<li>This is a very popular question in both the Solutions Architect Associate Exam &amp; the SysOps Administrator Associate Exam<ul>
<li>Elastic Beanstalk</li>
<li>Elastic MapReduce</li>
<li>OpsWork</li>
<li>EC2</li>
</ul>
</li>
<li>Exam Tips: There’s a good change this will be worth 1 point in your exam, so remember these services. Remember that you do not have access to RDS, DynamoDB, S3 or Glacier</li>
</ul>
</li>
<li><p>Elastic Load Balancer Configurations</p>
<ul>
<li>Exam Tips<ul>
<li>You can use Elastic Load Balancers to load balance across different availability zones within the same region, but not to different regions (or different VPC’s) themselves.</li>
<li>An ELB and a NAT are different things entirely.</li>
</ul>
</li>
<li>Two types of ELB<ul>
<li>External Elastic Load Balancers (with external DNS names)</li>
<li>Internal Elastic Load Balancers (with internal DNS names)</li>
</ul>
</li>
<li>Health Check - Recap<br>  <img src="/images/AWS/Sysops/EB_healthy_check_recap.jpg" alt="pic_need_to_place"></li>
<li>Sticky Sessions<br>  By default, a load balancer routes each request independently to the application instance with the smallest load.<br>  However, you can use the sticky session feature (also known as session affinity), which enables the load balancer to lock a user down to a specific web server (EC2 instance).<br>  This ensures that all requests from the user during the session are always sent to the same server.<br>  The key to managing sticky sessions is to determine how long your load balancer should consistently route the user’s request to the same application instance.<ul>
<li>Sticky Session Types<ul>
<li>Duration Based Session Stickiness</li>
<li>Application-Controlled Session Stickiness</li>
</ul>
</li>
<li>Edit in the [Port Configuration] setting in the [Description] tab.</li>
<li>Duration Based<br>  Most commonly used. The load balancer itself creates the session cookie.<br>  When the load balancer receives a request, it first checks to see if this cookie is present in the request. If so, the request is sent to the application instance specified in the cookie. If there is no cookie, the load balancer chooses an application instance based on the existing load balancing algorithm and adds a new cookie in to the response.<br>  The stickiness policy configuration defines a cookie expiration, which established the duration of validity for each cookie. The cookie is automatically updated after its duration expires.<br>  If an application instance fails or becomes unhealthy, the load balancer stops routing request to that instance, instead chooses a new instance based on the existing load balancing algorithm. The request is routed to the new instance as if there is no cookie and the session is no longer sticky.</li>
<li>Application Controlled<br>  The load balancer uses a special cookie to associate the session with the instance that handled the initial request, but follows the lifetime of the application cookie specified in the policy configuration. The load balancer only inserts a new stickiness cookie if the application response includes a new application cookie. The load balancer stickiness cookie does not update with each request. If the application cookie is explicitly removed or expires, the session stops being sticky until a new application cookie is issued.<br>  If an instance fails or becomes unhealthy, the load balancer stops routing requests to that instance, and chooses a new healthy instance based on the existing load balancing algorithm. The load balancer treats the session as now “stuck” to the new healthy instance, and continues routing requests to that instance even if the failed instance comes back. However, it is up to the new application instance whether and how to respond to a session which it has not previously seen.</li>
</ul>
</li>
</ul>
</li>
<li><p>Pre-warming the Elastic Load Balancer</p>
<ul>
<li>What is ‘Pre-warming’ for ELB<ul>
<li>AWS Staff can pre-configure the load balancer to have the appropriate level of capacity based on expected traffic.</li>
<li>This is used in certain scenarios, such as when flash traffic is expected, or in the case where a load test cannot be configured to gradually increase traffic.</li>
<li>This can be done by contacting AWS staff prior to the expected event. You will need to know the start and end dates of your expected flash traffic or test, the expected request rate per second and the total size of the typical request/response that you will be experiencing.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="Data-Management"><a href="#Data-Management" class="headerlink" title="Data Management"></a>Data Management</h4><ul>
<li><p>Disaster Recovery</p>
<ul>
<li>Back Up &amp; Disaster Recovery is quite a key component of the SysOps Exam. It’s important to understand the key concepts well. You can also want to read the following white paper: <a href="https://media.amazonwebservices.com/AWS_Disaster_Recovery.pdf" target="_blank" rel="external">https://media.amazonwebservices.com/AWS_Disaster_Recovery.pdf</a></li>
<li>What is Disaster Recovery<ul>
<li>Disaster recovery (DR) is about preparing for and recovering from a disaster. Any event that has a negative impact on a company’s business continuity or finances could be termed a disaster. This includes hardware or software failure, a network outage, a power outage, physical damage to a building like fire or flooding, human error, or some other significant event.</li>
</ul>
</li>
<li>Traditional Approaches to DR<ul>
<li>A traditional approach to DR usually involves an N+1 approach and has different levels of off-site duplication of data and infrastructure.<ul>
<li>Facilities to house the infrastructure, including power and cooling</li>
<li>Security to ensure the physical protection of assets</li>
<li>Suitable capacity to scale the environment</li>
<li>Support for repairing, replacing, and refreshing the infrastructure</li>
<li>Contractual agreements with an Internet service provider (ISP) to provide Internet connectivity that can sustain bandwidth utilization for the environment under a full load</li>
<li>Network infrastructure such as firewalls, routers, switches, and load balancers</li>
<li>Enough server capacity to run all mission-critical services, including storage appliances for the supporting data, and servers to run applications and backend services such as user authentication, Domain Name System (DNS)</li>
<li>Dynamic Host Configuration Protocol (DHCP), monitoring, and alerting</li>
</ul>
</li>
</ul>
</li>
<li>Why use aws for DR<ul>
<li>Only minimum hardware is required for ‘data replication’</li>
<li>Allows you to be flexible depending on what your disaster is and how to recover from it</li>
<li>Open cost model (pay as you use) rather than heavy investment upfront. Scaling is quick and easy</li>
<li>Automate disaster recovery deployment</li>
</ul>
</li>
<li>What Services<ul>
<li>Regions</li>
<li>Storage</li>
<li>S3 - 99.999999999% durability and Cross Region Replication</li>
<li>Glacier</li>
<li>Elastic Block Store (EBS)</li>
<li>Direct Connect</li>
<li>AWS Storage Gateway</li>
<li>Gateway-cached volumes - store primary data and cache most recently used data locally.</li>
<li>Gateway-stored volumes - store entire dataset on site and asynchronously replicate data back to S3</li>
<li>Gateway-virtual tape library - Store your virtual tapes in either S3 or Glacier</li>
<li>Compute<ul>
<li>EC2</li>
<li>EC2 VM Import Connector - Virtual appliance which allows you to import virtual machine images from your existing environment to Amazon EC2 instances.</li>
</ul>
</li>
<li>Networking<ul>
<li>Route53</li>
<li>Elastic Load Balancing</li>
<li>Amazon Virtual Private Cloud (VPC)</li>
<li>Amazon Direct Connect</li>
</ul>
</li>
<li>Database<ul>
<li>RDS</li>
<li>DynamoDB</li>
<li>Redshift</li>
</ul>
</li>
<li>Orchestration<ul>
<li>CloudFormation</li>
<li>ElasticBeanstalk</li>
<li>OpsWork</li>
</ul>
</li>
<li>Lambda</li>
</ul>
</li>
<li>RTO vs RPO<ul>
<li>Recovery Time Objective (RTO)<ul>
<li>RTO is the length of time from which you can recover from a disaster. It is measured from when the disaster first occurred as to when you have fully recovered from it.</li>
</ul>
</li>
<li>Recovery Point Objective (RPO)<ul>
<li>RPO is the amount of data your organization is prepared to lose in the event of a disaster (1 days worth of emails, 5 hours of online transaction records etc, 24 hours of backup etc)</li>
</ul>
</li>
<li>Typically the lower RTO &amp; RPO threshold, the more costly it solution will be.</li>
</ul>
</li>
<li>DR Scenarios<ul>
<li>Four Scenarios<ul>
<li>Backup &amp; Restore</li>
<li>Pilot Light</li>
<li>Warm Standby</li>
<li>Multi Site</li>
</ul>
</li>
<li>Backup &amp; Restore<ul>
<li>In most traditional environments, data is backed up to tape and sent off-site regularly. If you use this method, it can take a long time to restore your system in the event of a disruption or disaster. Amazon S3 is an ideal destination for backup data that might be needed quickly to perform a restore. Transferring data to and from Amazon S3 is typically done through the network, and is therefore accessible from any location.</li>
<li>You can use AWS Import/Export to transfer very large data sets by shipping storage devices directly to AWS. For longer-term data storage where retrieval times of several hours are adequate, there is Amazon Glacier, which has the same durability model as Amazon S3. . Amazon Glacier and Amazon S3 can be used in conjunction to produce a tiered backup solution.</li>
<li>Data Backup Options to Amazon S3 from On-Site Infrastructure or from AWS.<br>  <img src="/images/AWS/Sysops/data_backup_options_to_S3_from_on_site_infrastructure_from_aws.jpg" alt="data_backup_options_to_S3_from_on_site_infrastructure_from_aws"></li>
<li>Restoring a System from Amazon S3 Backups to Amazon EC2<br>  <img src="/images/AWS/Sysops/restoring_a_system_from_amazon_s3_backups_to_amazon_ec2.jpg" alt="restoring_a_system_from_amazon_s3_backups_to_amazon_ec2"></li>
<li>Key steps for backup &amp; restore<ul>
<li>Select an appropriate tool or method to back up your data into AWS.</li>
<li>Ensure that you have an appropriate retention policy for this data.</li>
<li>Ensure that appropriate security measures are in place for this data, including encryption and access policies.</li>
<li>Regularly test the recovery of this data and the restoration of your system.</li>
</ul>
</li>
</ul>
</li>
<li>Pilot Light<ul>
<li>The term pilot light is often used to describe a DR scenario in which a minimal version of an environment is always running in the cloud. The idea of the pilot light is an analogy that comes from the gas heater. In a gas heater, a small flame that’s always on can quickly ignite the entire furnace to heat up a house.</li>
<li>This scenario is similar to a backup-and-restore scenario. For example, with AWS you can maintain a pilot light by configuring and running the most critical core elements of your system in AWS. When the time comes for recovery, you can rapidly provision a full-scale production environment around the critical core.</li>
<li>Infrastructure elements for the pilot light itself typically include your database servers, which would replicate data to Amazon EC2 or Amazon RDS. Depending on the system, there might be other critical data outside of the database that needs to be replicated to AWS. This is the critical core of the system (the pilot light) around which all other infrastructure pieces in AWS (the rest of the furnace) can quickly be provisioned to restore the complete system.</li>
<li>To provision the remainder of the infrastructure to restore business-critical services, you would typically have some preconfigured servers bundled as Amazon Machine Images (AMIs), which are ready to be started up at a moment’s notice.  When starting recovery, instances from these AMIs come up quickly with their pre-defined role (for example, Web or App Server) within the deployment around the pilot light.</li>
<li>From a networking point of view, you have two main options for provisioning:<ul>
<li>Use pre-allocated elastic IP address and associate them with your instances when invoking DR. You can also use pre-allocated elastic network interfaces (ENIs) with pre-allocated Mac Addresses for applications with special licensing requirements</li>
<li>Use Elastic Load Balancing (ELB) to distribute traffic to multiple instances. You would then update your DNS records to point at your Amazon EC2 instance or point to your load balancer using a CNAME</li>
</ul>
</li>
<li>Preparation phase<ul>
<li>The Preparation Phase of the Pilot Light Scenario<br>  <img src="/images/AWS/Sysops/the_preparation_phase_of_the_pilot_light_scenario.jpg" alt="the_preparation_phase_of_the_pilot_light_scenario"></li>
<li>Key steps for preparation:<ul>
<li>Set up Amazon EC2 instances to replicate or mirror data.</li>
<li>Ensure that you have all supporting custom software packages available in AWS.</li>
<li>Create and maintain AMIs of key servers where fast recovery is required.</li>
<li>Regularly run these servers, test them, and apply any software updates and configuration changes.</li>
<li>Consider automating the provisioning of AWS resources</li>
</ul>
</li>
</ul>
</li>
<li>Recovery phase<ul>
<li>The Recovery Phase of the Pilot Light Scenario<br>  <img src="/images/AWS/Sysops/the_recovery_phase_of_the_pilot_light_scenario.jpg" alt="the_recovery_phase_of_the_pilot_light_scenario"></li>
<li>Key steps for recovery:<ul>
<li>Start your application Amazon EC2 instances from your custom AMIs.</li>
<li>Resize existing database/data store instances to process the increased traffic.</li>
<li>Add additional database/data store instances to give the DR site resilience in the data tier; if you are using Amazon RDS, turn on Multi-AZ to improve resilience.</li>
<li>Change DNS to point at the Amazon EC2 servers.</li>
<li>Install and configure any non-AMI based systems, ideally in an automated way.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Warm Standby<ul>
<li>The term warm standby is used to describe a DR scenario in which a scaled-down version of a fully functional environment is always running in the cloud. A warm standby solution extends the pilot light elements and preparation. It further decreases the recovery time because some services are always running. By identifying your business-critical systems, you can fully duplicate these systems on AWS and have them always on.</li>
<li>These servers can be running on a minimum-sized fleet of Amazon EC2 instances on the smallest sizes possible. This solution is not scaled to take a full-production load, but it is fully functional. It can be used for non-production work, such as testing, quality assurance, and internal use.</li>
<li>In a disaster, the system is scaled up quickly to handle the production load. In AWS, this can be done by adding more instances to the load balancer and by resizing the small capacity servers to run on larger Amazon EC2 instance types.</li>
<li>Horizontal scaling is preferred over vertical scaling</li>
<li>Preparation phase<ul>
<li>The Preparation Phase of the Warm Standby Scenario<br>  <img src="/images/AWS/Sysops/the_preparation_phase_of_the_warm_standby_scenario.jpg" alt="the_preparation_phase_of_the_warm_standby_scenario"></li>
<li>Key steps for preparation:<ul>
<li>Set up Amazon EC2 instances to replicate or mirror data.</li>
<li>Create and maintain AMIs.</li>
<li>Run your application using a minimal footprint of Amazon EC2 instances or AWS infrastructure.</li>
<li>Patch and update software and configuration files in line with your live environment.</li>
</ul>
</li>
</ul>
</li>
<li>Recovery phase<ul>
<li>The Recovery Phase of the Warm Standby Scenario<br>  <img src="/images/AWS/Sysops/the_recovery_phase_of_the_warm_standby_scnario.jpg" alt="the_recovery_phase_of_the_warm_standby_scnario"></li>
<li>Key steps for recovery:<ul>
<li>Increase the size of the Amazon EC2 fleets in service with the load balancer (horizontal scaling).</li>
<li>Start applications on larger Amazon EC2 instance types as needed (vertical scaling).</li>
<li>Either manually change the DNS records, or use Amazon Route 53 automated health checks so that all traffic is routed to the AWS environment.</li>
<li>Consider using Auto Scaling to right-size the fleet or accommodate the increased load.</li>
<li>Add resilience or scale up your database.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Multi Site<ul>
<li>A multi-site solution runs in AWS as well as on your existing on-site infrastructure, in an active-active configuration. The data replication method that you employ will be determined by the recovery point that you choose.</li>
<li>You can use Route53 to root traffic to both sites either symmetrically or asymmetrically.</li>
<li>In an on-site disaster situation, you can adjust the DNS weighting and send all traffic to the AWS servers. The capacity of the AWS service can be rapidly increased to handle the full production load. You can use Amazon EC2 Auto Scaling to automate this process. You might need some application logic to detect the failure of the primary database services and cut over to the parallel database services running in AWS.</li>
<li>Preparation phase<ul>
<li>The Preparation Phase of the Multi-Site Scenario<br>  <img src="/images/AWS/Sysops/the_preparation_phase_of_the_multi_site_scenario.jpg" alt="the_preparation_phase_of_the_multi_site_scenario"></li>
<li>Key steps for preparation:<ul>
<li>Set up your AWS environment to duplicate your production environment.</li>
<li>Set up DNS weighting, or similar traffic routing technology, to distribute incoming requests to both sites.  Configure automated failover to re-route traffic away from the affected site.</li>
</ul>
</li>
</ul>
</li>
<li>Recovery phase<ul>
<li>The Recovery Phase of the Multi-Site Scenario Involving On-Site and AWS Infrastructure.<br>  <img src="/images/AWS/Sysops/the_recovery_phase_of_the_multi_site_scenario_involving_on_site_and_aws_infrastructure.jpg" alt="the_recovery_phase_of_the_multi_site_scenario_involving_on_site_and_aws_infrastructure"></li>
<li>Key steps for recovery:<ul>
<li>Either manually or by using DNS failover, change the DNS weighting so that all requests are sent to the AWS site.</li>
<li>Have application logic for failover to use the local AWS database servers for all queries.</li>
<li>Consider using Auto Scaling to automatically right-size the AWS fleet.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Failing Back<ul>
<li>Backup and restore<ol>
<li>Freeze data changes to the DR site</li>
<li>Take a backup</li>
<li>Restore the backup to the primary site</li>
<li>Re-point users to the primary site</li>
<li>Unfreeze the changes</li>
</ol>
</li>
<li>Pilot light, warm standby, and multi-site:<ol>
<li>Establish reverse mirroring/replication from the DR site back to the primary site, once the primary site has caught up with the changes.</li>
<li>Freeze data changes to the DR site</li>
<li>Re-point users to the primary site</li>
<li>Unfreeze the changes</li>
</ol>
</li>
</ul>
</li>
<li>Exam Tips<br>  Pay particular attention to the Pilot Light Scenario and specifically the fact that you can have Elastic Network Interfaces (ENI’s) with preconfigured MAC addresses.</li>
</ul>
</li>
</ul>
</li>
<li><p>AWS Services and Automated Backups</p>
<ul>
<li>Services that have Automated Backup<ul>
<li>RDS</li>
<li>Elasticache (Redis only)</li>
<li>Redshift</li>
</ul>
</li>
<li>Services that do not have Automated Backup<ul>
<li>EC2</li>
</ul>
</li>
<li>RDS Automatd Backups<ul>
<li>For MySQL you need innoDB (transactional engine)</li>
<li>There is a performance hit if Multi-AZ is not enabled</li>
<li>If you delete an instance, then ALL automated backups are deleted</li>
<li>However, manual DB snapshots will NOT be deleted</li>
<li>All stored on S3</li>
<li>When you do a restore, you can change the engine type (SQL Standard to SQL Enterprise for example). Provided you have enough storage space</li>
</ul>
</li>
<li>Elasticache Backups<ul>
<li>Available for Redis Cache Cluster only</li>
<li>The entire cluster is snapshotted</li>
<li>Snapshot will degrade performance</li>
<li>Therefore only set your snapshot window during the least busy part of the day</li>
<li>Stored on S3</li>
</ul>
</li>
<li>Redshift Backups<ul>
<li>Stored on S3</li>
<li>By default, Amazon Redshift enables automated backups of your data warehouse cluster with a 1-day retention period</li>
<li>Amazon Redshift only backs up data that has changed so most snapshots only use up a small amount of your free backup storage</li>
</ul>
</li>
<li>EC2<ul>
<li>No automated backups</li>
<li>Backups degrade you performance, schedule these times wisely</li>
<li>Snapshots are stored in S3</li>
<li>Can create automated backups using either the command line interface or Python</li>
<li>They are incremental:<ul>
<li>Snapshots only store incremental changes since last snapshot</li>
<li>Only charged for incremental storage</li>
<li>Each snapshot still contains the base snapshot data</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>EC2 Type - EBS vs Instance Store</p>
<ul>
<li>History<ul>
<li>When EC2 was first launched, all AMI’s were backed by Amazon’s Instance Store. Instance store is known as ephemeral storage, which simply means non-persistence or temporary storage.</li>
<li>Later on AWS launched EBS, Elastic Block Storage, which allows users to have data persistence and to save their data permanently.</li>
</ul>
</li>
<li>Confusion<ul>
<li>There is a lot of confusion between instance store volumes and EBS volumes in the AWS community and you need to have a good understanding of the differences between the two. Let’s start with volumes. There are two types of volumes:<ul>
<li>Root Volume (this is where your operating system is installed)</li>
<li>Additional Volumes (this can be your D:\ E:\ F:\ or /dev/sdb, /dev/sdc, /dev/sdd etc)</li>
</ul>
</li>
</ul>
</li>
<li>Route Volume Sizes<ul>
<li>Root device volumes can either be EBS volumes or Instance Store volumes</li>
<li>An Instance store root device volume’s maximum size is 10Gb</li>
<li>EBS root device volume can be up to 1 or 2Tb depending on the OS</li>
</ul>
</li>
<li>Terminating an Instance - EBS<ul>
<li>EC2 Instances can be terminated:<ul>
<li>EBS root device volumes are terminated by DEFAULT when the EC2 instance is terminated. You can stop this b unselecting the “Delete on Termination” option when creating the instance or by setting the deleteontermination flag to false using the command line</li>
<li>Other EBS volumes attached to the instance are preserved however, if you delete the instance</li>
<li>Instance store device root volumes are terminated by DEFAULT when the EC2 instance is terminated. You cannot stop this</li>
<li>Other instance store volumes will be deleted on termination automatically</li>
<li>Other EBS volumes attached to the EC2 instance will persist automatically</li>
</ul>
</li>
</ul>
</li>
<li>Stopping an Instance<ul>
<li>EBS backed instances can be stopped</li>
<li>Instance Store backed instances CANNOT be stopped. Only rebooted or terminated</li>
</ul>
</li>
<li>Instance Store Data<ul>
<li>The data in an instance store persists only during the lifetime of its associated instance. If an instance reboots (intentionally or unintentionally), data in the instance store persists. However, data on instance store volumes is lost under the following circumstances:<ul>
<li>Failure of an underlying drive</li>
<li>Stopping an Amazon EBS-backed instance</li>
<li>Terminating an instance</li>
</ul>
</li>
</ul>
</li>
<li>Instance Store<ul>
<li>Therefore, do not rely on instance store volumes for valuable, long-term data. Instead, keep your data safe by using a replication strategy across multiple instances, storing data in Amazon S3, or using Amazon EBS volumes.</li>
</ul>
</li>
<li>Comparison EBS vs Instance Store<br>  <img src="/images/AWS/Sysops/comparison_EBS_InstanceStore.jpg" alt="comparison_EBS_InstanceStore"></li>
<li>Exam Tips<ul>
<li>‘Delete on Termination’ is the default for all EBS root device volumes. You can set this to false however but only at instance creation time</li>
<li>Additional volumes will persist automatically. You need to delete these manually when you delete an instance</li>
<li>Instance Store is known as ephemeral storage, meaning that data will not persist after an instance is deleted. You cannot set this to false, data will always be deleted when that instance disappears</li>
</ul>
</li>
</ul>
</li>
<li><p>Upgrading EBS volume types - Exam tips</p>
<ul>
<li>EBS volumes can be changed on the fly (except for magnetic standard).</li>
<li>Best practice to stop the EC2 instance and then change the volume</li>
<li>You can change volume types by taking a snapshot and then using the snapshot to create a new volume</li>
<li>If you change a volume on the fly you must wait for 6 hours before making another change</li>
<li>You can scale EBS Volumes up only</li>
<li>Volumes must be in the same AZ as the EC2 instances.</li>
</ul>
</li>
<li><p>Storing Log Files &amp; Backups</p>
<ul>
<li>Centralized Monitoring &amp; Logging<ul>
<li>You can monitor your environment in a number of ways:<ul>
<li>Using a third party, centralized monitoring platform, such as Zennos, Splunk, RSyslog, Kiwi etc. These logs can then be stored on S3.</li>
<li>Using CloudWatch Logs (relatively new service)</li>
<li>Utilizing Access Logging on S3 (S3 only)</li>
</ul>
</li>
</ul>
</li>
<li>Suggested to use S3<ul>
<li>The best place to store your logs is probably S3:<ul>
<li>99.999999999% durability</li>
<li>Life cycle management</li>
<li>Archive off to Glacier</li>
<li>Effectively allows you to Tier your back up solution</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="OpsWorks"><a href="#OpsWorks" class="headerlink" title="OpsWorks"></a>OpsWorks</h4><ul>
<li><p>What is OpsWorks</p>
<ul>
<li>Cloud-based applications usually require a group of related resources—application servers, database servers, and so on—that must be created and managed collectively. This collection of instances is called a stack. A simple application stack might look something like the following.<br><img src="/images/AWS/Sysops/what_is_opswork.png" alt="what_is_opswork"></li>
<li>AWS OpsWorks Stacks provides a simple and straightforward way to create and manage stacks and their associated applications and resources</li>
<li>Amazon Definition:<ul>
<li>AWS OpsWorks is an application management service that helps you automate operational tasks like code deployment, software configurations, package installations, database setups, and server scaling using Chef. OpsWorks gives you the flexibility to define your application architecture and resource configuration and handles the provisioning and management of your AWS resources for you. OpsWorks includes automation to scale your application based on time or load, monitoring to help you troubleshoot and take automated action based on the state of your resources, and permissions and policy management to make management of multi-user environments easier.</li>
</ul>
</li>
</ul>
</li>
<li><p>What is Chef</p>
<ul>
<li>Chef turns infrastructure into code. With Chef, you can automate how you build, deploy, and manage your infrastructure. Your infrastructure becomes as versionable, testable, and repeatable as application code.</li>
<li>Chef server stores your recipes as well as other configuration data. The Chef client is installed on each server, virtual machine, container, or networking device you manage - we’ll call these nodes. The client periodically polls Chef server latest policy and state of your network. If anything on the node is out of date, the client brings it up to date.</li>
</ul>
</li>
<li><p>What is OpsWorks</p>
<ul>
<li>A GUI to deploy and configure your infrastructure quickly. OpsWorks consists of two elements, Stacks and Layers.</li>
<li>A stack is a container (or group) of resources such as ELBS, EC2 instances, RDS instances etc.</li>
<li>A layer exists within a stack and consists of things like a web application layer. An application processing layer or a Database layer.</li>
<li>When you create a layer, rather than going and configuring everything manually (like installing Apache, PHP etc) OpsWorks takes care of this for you.</li>
</ul>
</li>
<li><p>Layers</p>
<ul>
<li>1 or more layers in the stack</li>
<li>An instance must be assigned to at least 1 layer</li>
<li>Which chef layers run, are determined by the layer the instance belongs to</li>
<li>Preconfigured Layers include:<ul>
<li>Applications</li>
<li>Databases</li>
<li>Load Balancers</li>
<li>Caching</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="Security"><a href="#Security" class="headerlink" title="Security"></a>Security</h4><ul>
<li>Security Token Service (STS)<ul>
<li>what is Security Token Service (STS)<ul>
<li>Grants users limited and temporary access to AWS resources. Users can come from three sources:<ul>
<li>Federation (typically Active Directory)<ul>
<li>Uses Security Assertion Markup Language (SAML)</li>
<li>Grants temporary access based off the users Active Directory credentials. Does not need to be a user in IAM</li>
<li>Single sign on allows users to log in to AWS console without assigning IAM credentials</li>
</ul>
</li>
<li>Federation with Mobile Apps<ul>
<li>Use Facebook/Amazon/Google or other OpenID providers to log in.</li>
</ul>
</li>
<li>Cross Account Access<ul>
<li>Let’s users from one AWS account access resources in another</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Understanding Key Terms<ul>
<li>Federation: combining or joining a list of users in one domain (such as IAM) with a list of users in another domain (such as Active Directory, Facebook etc)</li>
<li>Identity Broker: a service that allows you to take an identity from point A and join it (federate it) to point B</li>
<li>Identity Store - Services like Active Directory, Facebook, Google etc</li>
<li>Identities - a user of a service like Facebook etc.</li>
</ul>
</li>
<li>Scenario<ul>
<li>AWS blog [<a href="https://aws.amazon.com/cn/blogs/aws/aws-identity-and-access-management-now-with-identity-federation/" target="_blank" rel="external">AWS Identity and Access Management – Now With Identity Federation</a>]</li>
<li>You are hosting a company website on some EC2 web servers in your VPC. Users of the website must log in to the site which then authenticates against the companies active directory servers which are based on site at the companies head quarters. Your VPC is connected to your company HQ via a secure IPSEC VPN. Once logged in the user can only have access to their own S3 bucket. How do you set this up?<br>  <img src="/images/AWS/Sysops/sts_scenario.jpg" alt="sts_scenario"></li>
<li>Steps of scenario<ul>
<li>Employee enters their username and password</li>
<li>The application calls an Identity Broker. The broker captures the username and password.</li>
<li>The Identity Broker uses the organization’s LDAP directory to validate the employee’s identity.</li>
<li>The Identity Broker calls the new GetFederationToken function using IAM credentials. The call must include an IAM policy and a duration (1 to 36 hours), along with a policy that  specifies the permissions to be granted to the temporary security credentials.</li>
<li>The Security Token Service confirms that the policy of the IAM user making the call to GetFederationToken gives permission to create new tokens and then returns four values to the application: An access key, a secret access key, a token, and a duration (the token’s lifetime).</li>
<li>The Identity Broker returns the temporary security credentials to the reporting application.</li>
<li>The data storage application uses the temporary security credentials (including the token) to make requests to Amazon S3.</li>
<li>Amazon S3 uses IAM to verify that the credentials allow the requested operation on the given S3 bucket and key</li>
<li>IAM provides S3 with the go-ahead to perform the requested operation.</li>
</ul>
</li>
<li>In the Exam<ul>
<li>Develop an Identity Broker to communicate with LDAP and AWS STS</li>
<li>Identity Broker always authenticates with LDAP first, Then with AWS STS</li>
<li>Application then gets temporary access to AWS resources</li>
</ul>
</li>
</ul>
</li>
<li>Scenario 2<ul>
<li>steps of scenario<ul>
<li>Develop an Identity Broker to communicate with LDAP and AWS STS</li>
<li>Identity Broker always authenticates with LDAP first, gets an IAM Role associate with a user</li>
<li>Application then authenticates with STS and assumes that IAM Role</li>
<li>Application uses that IAM role to interact with S3</li>
</ul>
</li>
<li>In the Exam<ul>
<li>Develop an Identity Broker to communicate with LDAP and AWS STS</li>
<li>Identity Broker always authenticates with LDAP first, Then with AWS STS</li>
<li>Application then gets temporary access to AWS resources</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>Overview of Security Processes</p>
<ul>
<li><a href="https://d0.awsstatic.com/whitepapers/aws-security-whitepaper.pdf" target="_blank" rel="external">aws-security-whitepaper</a></li>
<li><p>Shared Security Model</p>
<ul>
<li>AWS is responsible for securing the underlying infrastructure that supports the cloud. You’re responsible for anything you put on the cloud or connect to the cloud.<br>  <img src="/images/AWS/Sysops/aws_shared_security_responsibility_model.jpg" alt="aws_shared_security_responsibility_model"></li>
</ul>
</li>
<li><p>AWS Security Responsibilities</p>
<ul>
<li>Amazon Web Services is responsible for protecting the global infrastructure that runs all of the services offered in the AWS cloud. This infrastructure is comprised of the hardware, software, networking, and facilities that run AWS services.</li>
<li>AWS is responsible for the security configuration of its products that are considered managed services. Examples of these types of services include Amazon DynamoDB, Amazon RDS, Amazon Redshift, Amazon Elastic MapReduce, Amazon WorkSpaces</li>
</ul>
</li>
<li>Customer Security Responsibilities<ul>
<li>IAAS - —such as Amazon EC2, Amazon VPC, and Amazon S3—are completely under your control and require you to perform all of the necessary security configuration and management tasks.</li>
<li>Managed Services at AWS is responsible for patching, antivirus etc, however you are responsible for account management and user access. Its recommended that MFA be implemented, communicate to these services using SSL/TLS and that API/user activity logging be setup with CloudTrail.</li>
</ul>
</li>
<li>Storage Decommissioning<ul>
<li>When a storage device has reached the end of its useful life, AWS procedures include a decommissioning process that is designed to prevent customer data from being exposed to unauthorized individuals. AWS uses the techniques detailed in DoD 5220.22-M (“National Industrial Security Program Operating Manual “) or NIST 800-88 (“Guidelines for Media Sanitization”) to destroy data as part of the decommissioning process. All decommissioned magnetic storage devices are degaussed and physically destroyed in accordance with industry-standard practices.</li>
</ul>
</li>
<li>Network Security<ul>
<li>Transmission Protection<ul>
<li>You can connect to an AWS access point via HTTP or HTTPS using Secure Sockets Layer (SSL), a cryptographic protocol that is designed to protect against eavesdropping, tampering, and message forgery</li>
<li>For customers who require additional layers of network security, AWS offers the Amazon Virtual Private Cloud (VPC), which provides a private subnet within the AWS cloud, and the ability to use an IPsec Virtual Private Network (VPN) device to provide an encrypted tunnel between the Amazon VPC and your data center.</li>
</ul>
</li>
<li>Amazon Corporate Segregation<ul>
<li>Logically, the AWS Production network is segregated from the Amazon Corporate network by means of a complex set of network security / segregation devices.</li>
</ul>
</li>
</ul>
</li>
<li>Network Monitoring &amp; Protection<ul>
<li>Types<ul>
<li>DDos</li>
<li>Man in the middle attacks (MITM)</li>
<li>Ip Spoofing</li>
<li>Port Scanning</li>
<li>Packet Sniffing by other tenants</li>
</ul>
</li>
<li>Ip Spoofing<ul>
<li>The AWS-controlled, host-based firewall infrastructure will not permit an instance to send traffic with a source IP or MAC address other than its own.</li>
</ul>
</li>
<li>Port Scanning<ul>
<li>Unauthorized port scans by Amazon EC2 customers are a violation of the AWS Acceptable Use Policy. . You may request permission to conduct vulnerability scans as required to meet your specific compliance requirements. These scans must be limited to your own instances and must not violate the AWS Acceptable Use Policy. <strong>You must request a vulnerability scan in advance</strong>.</li>
</ul>
</li>
</ul>
</li>
<li>AWS Credentials<br>  <img src="/images/AWS/Sysops/aws_security_credentials.jpg" alt="aws_security_credentials"></li>
<li>AWS Trusted Advisor<ul>
<li>Trusted Advisor inspects your AWS environment and makes recommendations when opportunities may exist to save money, improve system performance, or close security gaps. It provides alerts on several of the most common security misconfigurations that can occur, including leaving certain ports open that make you vulnerable to hacking and unauthorized access, neglecting to create IAM accounts for your internal users, allowing public access to Amazon S3 buckets, not turning on user activity logging (AWS CloudTrail), or not using MFA on your root AWS Account.</li>
</ul>
</li>
<li>Instance Isolation<ul>
<li>Different instances running on the same physical machine are isolated from each other via the Xen hypervisor. Amazon is active in the Xen community, which provides awareness of the latest developments. In addition, the AWS firewall resides within the hypervisor layer, between the physical network interface and the instance’s virtual interface. All packets must pass through this layer, thus an instance’s neighbors have no more access to that instance than any other host on the Internet and can be treated as if they are on separate physical hosts. The physical RAM is separated using similar mechanisms.</li>
<li>Customer instances have no access to raw disk devices, but instead are presented with virtualized disks. The AWS proprietary disk virtualization layer automatically resets every block of storage used by the customer, so that one customer’s data is never unintentionally exposed to another. In addition, memory allocated to guests is scrubbed (set to zero) by the hypervisor when it is unallocated to a guest. The memory is not returned to the pool of free memory available for new allocations until the memory scrubbing is complete.<br><img src="/images/AWS/Sysops/Amazon_EC2_Multiple_Layers_of_Security.jpg" alt="Amazon_EC2_Multiple_Layers_of_Security"></li>
</ul>
</li>
<li>Other Considerations<ul>
<li><strong>Guest Operating System</strong> -  Virtual instances are completely controlled by you, the customer. You have full root access or administrative control over accounts, services, and applications. AWS does not have any access rights to your instances or the guest OS.</li>
<li><strong>Firewall</strong> -  Amazon EC2 provides a complete firewall solution; this mandatory inbound firewall is configured in a default deny-all mode and Amazon EC2 customers must explicitly open the ports needed to allow inbound traffic.</li>
<li><strong>Elastic Block Storage(EBS) Security</strong> - Encryption of sensitive data is generally a good security practice, and AWS provides the ability to encrypt EBS volumes and their snapshots with AES-256. The encryption occurs on the servers that host the EC2 instances, providing encryption of data as it moves between EC2 instances and EBS storage. In order to be able to do this efficiently and with low latency, the EBS encryption feature is only available on EC2’s more powerful instance types (e.g., M3, C3, R3, G2).</li>
<li><strong>Elastic Load Balancing</strong> - SSL Termination on the load balancer is supported.</li>
<li>Direct Connect<ul>
<li>Bypass Internet service providers in your network path. You can procure rack space within the facility housing the AWS Direct Connect location and deploy your equipment nearby. Once deployed, you can connect this equipment to AWS Direct Connect using a cross-connect.</li>
<li>Using industry standard 802.1q VLANs, the dedicated connection can be partitioned into multiple virtual interfaces. This allows you to use the same connection to access public resources such as objects stored in Amazon S3 using public IP address space, and private resources such as Amazon EC2 instances running within an Amazon VPC using private IP space, while maintaining network separation between the public and private environments.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>AWS &amp; IT Audits</p>
<ul>
<li>Compliance<ul>
<li>SOC 1/SSAE 16/ISAE 3402 (formerly SAS 70 Type II)</li>
<li>SOC2</li>
<li>SOC3</li>
<li>FISMA, DIACAP, and FedRAMP</li>
<li>PCI DSS Level 1</li>
<li>ISO 27001</li>
<li>ISO 9001</li>
<li>ITAR</li>
<li>FIPS 140-2</li>
<li>Several industry-specific standards:<ul>
<li>HIPAA</li>
<li>Cloud Security Alliance (CSA)</li>
<li>Motion Picture Association of America (MPAA)</li>
</ul>
</li>
</ul>
</li>
<li>Auditing on AWS<ul>
<li>your organization may undergo an audit. This cloud be for PCI Compliance, ISO 27001, SOC etc. There is a level of shared responsibility in regards to audits:<ul>
<li>AWS Provides - their annual certifications and reports (ISO 27001, PCI-DSS certificates etc). Amazon are responsible the global infrastructure including all hardware, data centers, physical security etc</li>
<li>Customer provides - everything they have put on AWS, such as EC2 instances, RDS instances, Applications, Assets in S3 etc. Essentially the organizations AWS assets (this can include the data itself)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="Networking"><a href="#Networking" class="headerlink" title="Networking"></a>Networking</h4><ul>
<li>Route53<ul>
<li>ELB’s do not have pre-defined IPv4 addresses, you resolve to them using a DNS name.</li>
<li>Understand the difference between an Alias Record and a CNAME</li>
<li>Given the choice, always choose an Alias Record over a CNAME.</li>
<li>Remember the different routing policies and their use cases.<ul>
<li>Simple</li>
<li>Weighted</li>
<li>Latency</li>
<li>Failover</li>
<li>Geolocation</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="VPC’s"><a href="#VPC’s" class="headerlink" title="VPC’s"></a>VPC’s</h4><ul>
<li>Basic Info<ul>
<li>Think of a VPC as a logical datacenter in AWS</li>
<li>Consists of IGW’s (Or Virtual Private Gateways), Route Tables, Network Access Control Lists, Subnets, Security Groups</li>
<li>1 Subnet = 1 Availability Zone</li>
<li>Security Groups are Stateful, Network Access Control Lists are Stateless.</li>
<li>Can Peer VPCs both in the same account and with other AWS accounts.</li>
<li>No Transitive Peering</li>
<li>Custom VPC network block size has to be between a /16 netmask and /28 netmask.</li>
</ul>
</li>
</ul>
<ul>
<li>What can you do with a VPC<ul>
<li>Launch instances into a subnet of your choosing</li>
<li>Assign custom IP address ranges in each subnet</li>
<li>Configure route tables between subnets</li>
<li>Create internet gateway and attach it to our VPC</li>
<li>Much better security control over your AWS resources</li>
<li>Instance security groups</li>
<li>Subnet network access control lists (ACLS)</li>
</ul>
</li>
</ul>
<ul>
<li><p>Default VPC vs Custom VPC</p>
<ul>
<li>Default VPC is user friendly, allowing you to immediately deploy instances</li>
<li>All Subnets in default VPC have a route out to the internet.</li>
<li>Each EC2 instance has both a public and private IP address</li>
<li>If you delete the default VPC the only way to get it back is to contact AWS.</li>
</ul>
</li>
<li><p>VPC peering</p>
<ul>
<li>Allows you to connect one VPC with another via a direct network route using private IP addresses.</li>
<li>Instances behave as if they were on the same private network</li>
<li>You can peer VPC’s with other AWS accounts as well as with other VPCs in the same account.</li>
<li>Peering is in a star configuration, ie 1 central VPC peers with 4 others, <strong>NO TRANSITIVE PEERING!!!</strong></li>
</ul>
</li>
<li><p>Create VPC</p>
<ul>
<li>things automatically created<ul>
<li>Route tables</li>
<li>Network ACLs</li>
<li>Security Groups</li>
<li>DHCP options set</li>
</ul>
</li>
<li>things are not automatically created<ul>
<li>Internet Gateways</li>
<li>Subnets</li>
</ul>
</li>
</ul>
</li>
<li><p>VPC Subnet</p>
<ul>
<li>There are 5 IP address reserved in each subnet by AWS, take CIDR block 10.0.0.0/24 as example<ul>
<li>10.0.0.0 Network address</li>
<li>10.0.0.1 Reserved by AWS for the VPC router</li>
<li>10.0.0.2 Reserved by AWS for DNS</li>
<li>10.0.0.3 Reserved by AWS for future use.</li>
<li>10.0.0.255 Network broadcast address, we do not support broadcast in a VPC, therefore we reserve this address.</li>
</ul>
</li>
</ul>
</li>
<li><p>NAT instances</p>
<ul>
<li>When creating a NAT instance, Disable Source/Destination Check on the Instance</li>
<li>NAT instance must be in a public subnet</li>
<li>Must have an elastic IP address to work</li>
<li>There must be a route out of the private subnet to the NAT instance, in order for this to work</li>
<li>The amount of traffic that NAT instances supports, depends on the instance size. If you are bottlenecking, increase the instance size</li>
<li>You can create high availability using Autoscaling Groups, multiple subnets in different AZ’s and a script to automate failover</li>
<li>Behind a Security Group.</li>
</ul>
</li>
<li><p>NAT Gateways</p>
<ul>
<li>Very new</li>
<li>Preferred by the enterprise</li>
<li>Scale automatically up to 10Gbps</li>
<li>No need to patch</li>
<li>Not associated with security groups</li>
<li>Automatically assigned a public ip address</li>
<li>Remember to update your route tables.</li>
<li>No need to disable Source/Destination Checks.</li>
</ul>
</li>
<li><p>NAT instances vs NAT Gateways</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>Attribute</th>
<th style="text-align:left">NAT gateway</th>
<th style="text-align:left">NAT instance</th>
</tr>
</thead>
<tbody>
<tr>
<td>Availability</td>
<td style="text-align:left">Highly available. NAT gateways in each Availability Zone are implemented with redundancy. Create a NAT gateway in each Availability Zone to ensure zone-independent architecture.</td>
<td style="text-align:left">Use a script to manage failover between instances.</td>
</tr>
<tr>
<td>Bandwidth</td>
<td style="text-align:left">Supports bursts of up to 10Gbps.</td>
<td style="text-align:left">Depends on the bandwidth of the instance type.</td>
</tr>
<tr>
<td>Maintenance</td>
<td style="text-align:left">Managed by AWS.You do not need to perform any maintenance.</td>
<td style="text-align:left">Managed by you, for example, by installing software updates or operating system patches on the instance.</td>
</tr>
<tr>
<td>Performance</td>
<td style="text-align:left">Software is optimized for handling NAT traffic.</td>
<td style="text-align:left">A generic Amazon Linux AMI that’s configured to perform NAT.</td>
</tr>
<tr>
<td>Cost</td>
<td style="text-align:left">Charged depending on the number of NAT gateways you use, duration of usage, and amount of data that you send through the NAT gateways.</td>
<td style="text-align:left">Charged depending on the number of NAT instances that you use, duration of usage, and instance type and size.</td>
</tr>
<tr>
<td>Type and size</td>
<td style="text-align:left">Uniform offering; you don’t need to decide on the type or size.</td>
<td style="text-align:left">Choose a suitable instance type and size, according to your predicted workload.</td>
</tr>
<tr>
<td>Public IP addresses</td>
<td style="text-align:left">Choose the Elastic IP address to associate with a NAT gateway at creation.</td>
<td style="text-align:left">Use an Elastic IP address or a public IP address with a NAT instance. You can change the public IP address at any time by associating a new Elastic IP address with the instance.</td>
</tr>
<tr>
<td>Private IP addresses</td>
<td style="text-align:left">Automatically selected from the subnet’s IP address range when you create the gateway.</td>
<td style="text-align:left">Assign a specific private IP address from the subnet’s IP address range when you launch the instance.</td>
</tr>
<tr>
<td>Security groups</td>
<td style="text-align:left">Cannot be associated with a NAT gateway. You can associate security groups with your resources behind the NAT gateway to control inbound and outbound traffic.</td>
<td style="text-align:left">Associate with your NAT instance and the resources behind your NAT instance to control inbound and outbound traffic.</td>
</tr>
<tr>
<td>Network ACLs</td>
<td style="text-align:left">Use a network ACL to control the traffic to and from the subnet in which your NAT gateway resides.</td>
<td style="text-align:left">Use a network ACL to control the traffic to and from the subnet in which your NAT instance resides.</td>
</tr>
<tr>
<td>Flow logs</td>
<td style="text-align:left">Use flow logs to capture the traffic.</td>
<td style="text-align:left">Use flow logs to capture the traffic.</td>
</tr>
<tr>
<td>Port forwarding</td>
<td style="text-align:left">Not supported.</td>
<td style="text-align:left">Manually customize the configuration to support port forwarding.</td>
</tr>
<tr>
<td>Bastion servers</td>
<td style="text-align:left">Not supported.</td>
<td style="text-align:left">Use as a bastion server.</td>
</tr>
<tr>
<td>Traffic metrics</td>
<td style="text-align:left">Not supported.</td>
<td style="text-align:left">View CloudWatch metrics.</td>
</tr>
<tr>
<td>Timeout behavior</td>
<td style="text-align:left">When a connection times out, a NAT gateway returns an RST packet to any resources behind the NAT gateway that attempt to continue the connection (it does not send a FIN packet).</td>
<td style="text-align:left">When a connection times out, a NAT instance sends a FIN packet to resources behind the NAT instance to close the connection.</td>
</tr>
<tr>
<td>IP fragmentation</td>
<td style="text-align:left">Supports forwarding of IP fragmented packets for the UDP protocol. Does not support fragmentation for the TCP and ICMP protocols. Fragmented packets for these protocols will get dropped.</td>
<td style="text-align:left">Supports reassembly of IP fragmented packets for the UDP, TCP, and ICMP protocols.</td>
</tr>
</tbody>
</table>
<ul>
<li><p>Network ACL’s</p>
<ul>
<li>Your VPC automatically comes a default network ACL and by default it allows all outbound and inbound traffic.</li>
<li>You can create a custom network ACL. By default, each custom network ACL denies all inbound and outbound traffic until you add rules.</li>
<li>Each subnet in your VPC must be associated with a network ACL. If you don’t explicitly associate a subnet with a network ACL, the subnet is automatically associated with the default network ACL.</li>
<li>You can associate a network ACL with multiple subnets; however, a subnet can be associated with only one network ACL at a time. When you associate a network ACL with a subnet, the previous association is removed.</li>
<li>A network ACl contains a numbered list of rules that is evaluated in order, starting with the lowest numbered rule.</li>
<li>A network ACl has separate inbound and outbound rules, and each rule can either allow or deny traffic.</li>
<li>Network ACLs are stateless responses to allowed inbound traffic are subject to the rules for outbound traffic (and vice versa)</li>
<li>Block IP Addresses using network ACL’s not Security Groups</li>
</ul>
</li>
<li><p>Security Group vs Network ACL</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>Security Group</th>
<th style="text-align:left">Network ACL</th>
</tr>
</thead>
<tbody>
<tr>
<td>operates at the instance level (first layer of defense)</td>
<td style="text-align:left">Operates at the subnet level (second layer of defense)</td>
</tr>
<tr>
<td>Supports allow rules only</td>
<td style="text-align:left">Supports allow rules and deny rules</td>
</tr>
<tr>
<td>Is stateful: Return traffic is automatically allowed, regardless of any rules</td>
<td style="text-align:left">Is stateless: Return traffic must be explicitly allowed by rules</td>
</tr>
<tr>
<td>We evaluate all rules before deciding whether to allow traffic</td>
<td style="text-align:left">We process rules in number order when deciding whether to allow traffic</td>
</tr>
<tr>
<td>Applies to an instance only if someone specifies the security group when launching the instance, or associates the security group with the instance later on</td>
<td style="text-align:left">Automatically applies to all instances in the subnets it’s associated with (backup layer of defense, so you don’t have to rely on someone specifying the security group)</td>
</tr>
</tbody>
</table>
<ul>
<li><p>NAT vs Bastions</p>
<ul>
<li>A NAT is used to provide internet traffic to EC2 instances in private subnets</li>
<li>A Bastion is used to securely administer EC2 instance (using SSH or RDP) in private subnets. In Australia we call them jump boxes.</li>
</ul>
</li>
<li><p>Resilient Architecture</p>
<ul>
<li>If you want resiliency, always have 2 public subnets and 2 private subnets. Make sure each subnet is in different availability zones.</li>
<li>With ELB’s make sure they are in 2 public subnets in 2 different availability zones.</li>
<li>With Bastion hosts, put them behind an autoscaling group with a minimum size of 2. Use Route53 (either round robin or using a health check) to automatically fail over.</li>
<li>NAT instances are tricky to make resilient. You need 1 in each public subnet, each with their own public IP address, and you need to write a script to fail between the two. Instead where possible, use NAT gateways.</li>
</ul>
</li>
<li><p>VPC Flow Logs</p>
<ul>
<li>You can monitor network traffic within your custom VPC’s using VPC Flow Logs.</li>
</ul>
</li>
<li><p>VPC limit</p>
<ul>
<li>Currently you can create 200 subnets per VPC by default</li>
</ul>
</li>
<li><p>Direct Connect</p>
<ul>
<li>What is Direct Connect <a href="https://aws.amazon.com/directconnect/?nc1=h_ls" target="_blank" rel="external">https://aws.amazon.com/directconnect/?nc1=h_ls</a><ul>
<li>AWS Direct Connect makes it easy to establish a dedicated network connection from your premises to AWS. Using AWS Direct Connect, you can establish private connectivity between AWS and your datacenter, office, or colocation environment, which in many cases can reduce your network costs, increase bandwidth throughput, and provide a more consistent network experience than Internet-based connections.</li>
<li>AWS Direct Connect lets you establish a dedicated network connection between your network and one of the AWS Direct Connect locations. Using industry standard 802.1q VLANs, this dedicated connection can be partitioned into multiple virtual interfaces. This allows you to use the same connection to access public resources such as objects stored in Amazon S3 using public IP address space, and private resources such as Amazon EC2 instances running within an Amazon Virtual Private Cloud (VPC) using private IP space, while maintaining network separation between the public and private environments. Virtual interfaces can be reconfigured at any time to meet your changing needs.</li>
</ul>
</li>
<li>Advantage of Direct Connect over VPN<ul>
<li><strong>Bandwidth &amp; a more consistent network experience!</strong></li>
<li>A VPC VPN Connection utilizes IPSec to establish encrypted network connectivity between your intranet and Amazon VPC over the Internet. VPN Connections can be configured in minutes and are a good solution if you have an immediate need, have low to modest bandwidth requirements, and can tolerate the inherent variability in Internet-based connectivity. AWS Direct Connect does not involve the Internet; instead, it uses dedicated, private network connections between your intranet and Amazon VPC.</li>
</ul>
</li>
</ul>
</li>
<li><p>Network Bottlenecks</p>
<ul>
<li>Each Instance type have the ma bandwidth and throughput.</li>
</ul>
</li>
</ul>
<h2 id="专项问题点"><a href="#专项问题点" class="headerlink" title="专项问题点"></a>专项问题点</h2><ul>
<li><p>ELB Connection draining</p>
<ul>
<li>Min: 1s, Max: 3600, default: 300s</li>
<li>helps the user to stop sending new requests traffic from the load balancer to the EC2 instance when the instance is being deregistered while continuing in-flight requests?</li>
</ul>
</li>
<li><p>AutoScaling Group Lifecycle</p>
<ul>
<li><a href="https://docs.aws.amazon.com/autoscaling/latest/userguide/AutoScalingGroupLifecycle.html" target="_blank" rel="external">Auto Scaling Lifecycle</a><br><img src="/images/AWS/Sysops/autoscaling_group_lifecycle.jpg" alt="autoscaling_group_lifecycle"></li>
<li><a href="https://docs.aws.amazon.com/autoscaling/latest/userguide/as-maintain-instance-levels.html" target="_blank" rel="external">Maintaining the Number of Instances in Your Auto Scaling Group</a></li>
</ul>
</li>
<li>CloudWatch 能监控的Metrics <a href="https://aws.amazon.com/cloudwatch/faqs/" target="_blank" rel="external">https://aws.amazon.com/cloudwatch/faqs/</a><ul>
<li>Amazon EC2 instances</li>
<li>EBS volumes</li>
<li>Elastic Load Balancers</li>
<li>Auto Scaling groups</li>
<li>EMR job flows</li>
<li>RDS DB instances</li>
<li>DynamoDB tables</li>
<li>ElastiCache clusters</li>
<li>RedShift clusters</li>
<li>OpsWorks stacks</li>
<li>Route 53 health checks</li>
<li>SNS topics</li>
<li>SQS queues</li>
<li>SWF workflows</li>
<li>and Storage Gateways</li>
</ul>
</li>
<li><p>不提供Detail monitoring的service, 最细颗粒是5 mins的service</p>
<ul>
<li>EMR</li>
<li>SNS</li>
</ul>
</li>
<li><p>CloudWatch 免费detail monitoring的几个service <a href="https://aws.amazon.com/cloudwatch/details/?nc1=h_ls" target="_blank" rel="external">https://aws.amazon.com/cloudwatch/details/?nc1=h_ls</a></p>
<ul>
<li><strong>Auto Scaling groups</strong>: seven pre-selected metrics at one-minute frequency, optional and for no additional charge.</li>
<li><strong>Elastic Load Balancers</strong>: thirteen pre-selected metrics at one-minute frequency, for no additional charge.</li>
<li><strong>Amazon Route 53 health checks</strong>: One pre-selected metric at one-minute frequency, for no additional charge</li>
<li><strong>Amazon EBS PIOPS (SSD) volumes</strong>: ten pre-selected metrics at one-minute frequency, for no additional charge</li>
<li><strong>Amazon CloudFront</strong>: six pre-selected metrics at one-minute frequency, for no additional charge</li>
<li><strong>Amazon ElastiCache nodes</strong>: thirty-nine pre-selected metrics at one-minute frequency, for no additional charge.</li>
<li><strong>Amazon RDS DB instances</strong>: fourteen pre-selected metrics at one-minute frequency, for no additional charge.</li>
<li><strong>Amazon Redshift</strong>: Sixteen pre-selected metrics at one-minute frequency, for no additional charge</li>
<li><strong>AWS Opsworks</strong>: fifteen pre-selected metrics at one-minute frequency, for no additional charge.</li>
<li><strong>Amazon CloudWatch Logs</strong>: six pre-selected metrics at one-minute frequency, for no additional charge</li>
</ul>
</li>
<li><p>CloudWatch 提供的几种统计值</p>
<ul>
<li>Average</li>
<li>Minimum</li>
<li>Maximum</li>
<li>Sum</li>
<li>Data Samples</li>
<li>p99</li>
<li>p95</li>
<li>p90</li>
<li>p50</li>
<li>p10</li>
</ul>
</li>
<li><p>CloudWatch AWS Namespaces</p>
<ul>
<li>There is no CloudTrail</li>
<li><a href="http://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/aws-namespaces.html" target="_blank" rel="external">All Cloudwatch Namespaces</a></li>
</ul>
</li>
<li><p>CloudWatch PutMetricData</p>
<ul>
<li>Each put-metric-data request is limited to 8KB in size for HTTP GET requests and is limited to 40 KB in size for HTTP POST requests.</li>
</ul>
</li>
<li><p><a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/classic/elb-ssl-security-policy.html" target="_blank" rel="external">SSL Negotiation Configurations for Classic Load Balancers</a></p>
<ul>
<li>Security Policies<ul>
<li>Predefined Security Policies</li>
<li>Custom Security Policies</li>
</ul>
</li>
<li>SSL Protocols (no TLS 1.3)<ul>
<li>supported<ul>
<li>TLS 1.2</li>
<li>TLS 1.1</li>
<li>TLS 1.0</li>
<li>SSL 3.0</li>
</ul>
</li>
<li>deprecated SSL Protocol<ul>
<li>SSL 2.0</li>
</ul>
</li>
</ul>
</li>
<li>The Server Order Preference is not supported in the Security Policy ELBSecurity Policy-2011-08 security policy.</li>
</ul>
</li>
<li><p>ELB sticky session algorithm</p>
<ul>
<li>This is how the ELB algorithm works in general when Cookie is not present<ul>
<li>First it checks the cookie is present in the service request</li>
<li>Since the cookie is not found in the request it will then decide which instance the service request should be routed to.</li>
<li>Finally the cookie is inserted in the response</li>
</ul>
</li>
<li>This is how the ELB algorithm works in general when Cookie is present<ul>
<li>First it checks the cookie is present in the service request</li>
<li>Since the cookie is found in the request it will then decide which instance the service request should be routed to based on the already present cookie.</li>
<li>Finally the cookie is inserted in the response</li>
</ul>
</li>
</ul>
</li>
<li><p>ELB access log file format</p>
<ul>
<li>format: bucket[/prefix]/AWSLogs/aws-account-id/elasticloadbalancing/region/yyyy/mm/dd/aws-account-id_elasticloadbalancing_region_load-balancer-id_end-time_ip-address_random-string.log.gz</li>
<li>sample: /AWSLogs/921187888888/elasticloadbalancing/us-west-2/2017/07/16/921187888888_elasticloadbalancing_us-west-2_awseb-e-u-AWSEBLoa-1KH856XXXXXXX_20170716T0000Z_35.161.113.177_1rhwm1ze.log</li>
</ul>
</li>
<li><p>IAM user name rule</p>
<ul>
<li>User names can be a combination of up to 64 letters, digits, and these characters: plus (+), equal (=), comma (,), period (.), at sign (@), and hyphen (-). Names must be unique within an account. They are not distinguished by case</li>
</ul>
</li>
<li><p>上传到CloudWatch的数据的时间戳</p>
<ul>
<li>past two week ~ two hours in the future : Each metric data point must be marked with a time stamp. The time stamp can be up to two weeks in the past and up to two hours into the future</li>
</ul>
</li>
<li><p>根据Wizard创建 VPC with Public an Private Subnets时</p>
<ul>
<li>默认会创建一个NAT Gateway，可以选择创建Nat Instance，并选择对应的Instance type和Key pair</li>
<li>创建两个Route Table<ul>
<li>面向private子网，0.0.0.0/0指向Nat Instance的是Main Route Table</li>
<li>面向public，0.0.0.0/0指向Internet Gateway的是Custom Route Table</li>
</ul>
</li>
<li>创建后不能直接删除，需要删除Public子网中的Nat Instance后才能删除VPC</li>
</ul>
</li>
<li><p>ACL rule priority</p>
<ul>
<li>Rule number. Rules are evaluated starting with the lowest numbered rule. As soon as a rule matches traffic, it’s applied regardless of any higher-numbered rule that may contradict it.</li>
</ul>
</li>
<li><p>VPC Dedicated Tenancy</p>
<ul>
<li>VPC 是非Dedicated的，建立EC2的时候是可以选Shared, Dedicated, Dedicated Host的</li>
<li>VPC建立的时候就是建立的Dedicated VPC时，建立在此VPC中的EC2，是不能选Shared的，只有Dedicated和Dedicated Host</li>
<li>在启动实例后，要想更改其租赁属性，有一定限制。<ul>
<li>在启动实例后，不能将其租赁属性从 default 改为 dedicated 或 host。</li>
<li>在启动实例后，不能将其租赁属性从 dedicated 或 host 改为 default。</li>
<li>在启动实例后，可以将其租赁属性从 dedicated 改为 host，或从 host 改为 dedicated</li>
</ul>
</li>
<li>You cannot change the tenancy of a default instance after you’ve launched it.</li>
</ul>
</li>
<li><p>VPC Peering Limitations</p>
<ul>
<li>You cannot create a VPC peering connection between VPCs that have matching or overlapping IPv4 or IPv6 CIDR blocks. Amazon always assigns your VPC a unique IPv6 CIDR block. If your IPv6 CIDR blocks are unique but your IPv4 blocks are not, you cannot create the peering connection.</li>
<li>You cannot create a VPC peering connection between VPCs in different regions.</li>
<li>You have a limit on the number active and pending VPC peering connections that you can have per VPC.</li>
<li>VPC peering does not support transitive peering relationships; in a VPC peering connection, your VPC does not have access to any other VPCs that the peer VPC may be peered with. This includes VPC peering connections that are established entirely within your own AWS account.</li>
<li>You cannot have more than one VPC peering connection between the same two VPCs at the same time.</li>
<li>A placement group can span peered VPCs; however, you do not get full-bisection bandwidth between instances in peered VPCs.</li>
<li>Unicast reverse path forwarding in VPC peering connections is not supported.</li>
<li>You can enable resources on either side of a VPC peering connection to communicate with each other over IPv6; however, IPv6 communication is not automatic. You must associate an IPv6 CIDR block with each VPC, enable the instances in the VPCs for IPv6 communication, and add routes to your route tables that route IPv6 traffic intended for the peer VPC to the VPC peering connection.</li>
</ul>
</li>
<li><p>IAM Limitation</p>
<ul>
<li>Groups in an AWS account - 300</li>
<li>Roles in an AWS account - 1000</li>
<li>Customer managed policies in an AWS account - 1500</li>
<li>Users in an AWS account - 5000</li>
<li>Groups an IAM user can be a member of - 10</li>
</ul>
</li>
<li><p>EC2 Termination Protection 不会保护来自instance内部的shutdown命令导致的terminal - <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/terminating-instances.html#Using_ChangingDisableAPITermination" target="_blank" rel="external">http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/terminating-instances.html#Using_ChangingDisableAPITermination</a></p>
<ul>
<li>The DisableApiTermination attribute does not prevent you from terminating an instance by initiating shutdown from the instance (using an operating system command for system shutdown) when the InstanceInitiatedShutdownBehavior attribute is set.</li>
</ul>
</li>
<li><p>CloudWatch can monitoring AutoScaling Metric</p>
<ul>
<li>可以直接在CloudWatch中查看AutoScaling中EC2的整体指标，包括CPU，Network In/Out等</li>
</ul>
</li>
<li><p>EBS limitation</p>
<ul>
<li>Number of EBS Volumes - 5000</li>
<li>Number of EBS snapshots - 10000</li>
</ul>
</li>
<li><p>VPC Limitation</p>
<ul>
<li>VPCs per region - 5</li>
<li>Subnets per VPC - 100</li>
</ul>
</li>
<li><p>Bucket Policy 优先级</p>
<ul>
<li>The explicited deny permission will override the allow</li>
</ul>
</li>
<li><p>关于Redis中出现Eviction时的对应方法:</p>
<ul>
<li>官网说是直接scale up by using a larger node type</li>
<li>AcloudGuru上有讨论说处理方法是Only Scale out</li>
<li>各个<ul>
<li><a href="http://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/CacheMetrics.WhichShouldIMonitor.html" target="_blank" rel="external">Which Metrics Should I Monitor</a></li>
<li><a href="https://acloud.guru/forums/aws-certified-sysops-administrator-associate/discussion/-Kc_XDW2XzOR32IFCY9f/redis-_scale_up_or_scale_out_-" target="_blank" rel="external">Redis- Scale up or scale out - question about lecture</a></li>
<li><a href="https://acloud.guru/forums/aws-certified-sysops-administrator-associate/discussion/-KDdkFs7QIlvu1npl2kR/redis-evictions-correction" target="_blank" rel="external">Redis Evictions Correction</a></li>
<li><a href="https://acloud.guru/forums/aws-certified-sysops-administrator-associate/discussion/-KNcfMRPnKdJinvljh8W/redis-evictions" target="_blank" rel="external">Redis Evictions</a></li>
<li><a href="https://acloud.guru/forums/aws-certified-sysops-administrator-associate/discussion/-K_D1AlOj9xH30fa0tl0/why-are-the-quizzes-so-messed-up-it-is-very-confusing" target="_blank" rel="external">Why are the quizzes so messed up? It is very confusing</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Doc"><a href="#Doc" class="headerlink" title="Doc"></a>Doc</h2><h3 id="User-Guide"><a href="#User-Guide" class="headerlink" title="User Guide"></a>User Guide</h3><ul>
<li><a href="http://docs.aws.amazon.com/opsworks/latest/userguide/welcome.html" target="_blank" rel="external">AWS Opsworks User Guide</a></li>
</ul>
<h3 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h3><ul>
<li><a href="https://aws.amazon.com/cn/elasticache/faqs/?nc1=h_ls" target="_blank" rel="external">Elasticache FAQ</a></li>
<li><a href="https://amazonaws-china.com/lambda/faqs/" target="_blank" rel="external">Lambda FAQ</a></li>
<li><a href="https://amazonaws-china.com/api-gateway/faqs/" target="_blank" rel="external">API Gateway FAQ</a></li>
</ul>
<h2 id="延伸"><a href="#延伸" class="headerlink" title="延伸"></a>延伸</h2><ul>
<li><a href="/2018/02/07/AWS-Certified-Solutions-Architect-Professional/" title="AWS Certified Solutions Architect - Professional Road Map">AWS Certified Solutions Architect - Professional Road Map</a></li>
<li><a href="/2017/07/24/AWS-Certified-Developer/" title="AWS Certified Developer - Associate Road Map">AWS Certified Developer - Associate Road Map</a></li>
<li><a href="/2019/10/18/AWS-Advanced-Networking-Specialty/" title="AWS Advanced Networking Specialty 考试心得">AWS Advanced Networking Specialty 考试心得</a>
</li>
</ul>
	  
	</div>

	<div>
  	<center>
	<div class="pagination">
<ul class="pagination">
	 
				
    	<li class="prev"><a href="/2017/12/12/how-to-write-multiline-to-file-by-shell/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i>Prev</a></li>
  		

        <li><a href="/archives"><i class="fa fa-archive"></i>Archive</a></li>

		
		   <li class="next"><a href="/2017/11/29/how-to-enable-slow-query-on-aws-rds-postgresql/" class="alignright next">Next<i class="fa fa-arrow-circle-o-right"></i></a></li>         
        
	
</ul>
</div>

    </center>
	</div>

    <!-- share -->
    
        
    <div class="bdsharebuttonbox">
        <a href="#" class="bds_more" data-cmd="more"></a>
        <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
        <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
        <a href="#" class="bds_fbook" data-cmd="fbook" title="分享到Facebook"></a>
        <a href="#" class="bds_twi" data-cmd="twi" title="分享到Twitter"></a>
        <a href="#" class="bds_linkedin" data-cmd="linkedin" title="分享到linkedin"></a>
        <a href="#" class="bds_evernotecn" data-cmd="evernotecn" title="分享到印象笔记"></a>
        <a href="#" class="bds_youdao" data-cmd="youdao" title="分享到有道云笔记"></a>
        <a href="#" class="bds_copy" data-cmd="copy" title="分享到复制网址"></a>
    </div>
    <script>
        window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"1","bdSize":"24"},"share":{}};
        with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
    </script>


        

    
	
	<!-- comment -->
	
<section id="comment">
  <h2 class="title">Comments</h2>
  
  	 <div id="disqus_thread">
     <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  	 </div>
  
</section>


	</div> <!-- col-md-9/col-md-12 -->
		
	
	<div id="side_meta">
		<div class="col-md-3" id="post_meta">

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2017-12-04
	</div>
	

	<!-- toc -->
	<div class="meta-widget">
	
	   <a data-toggle="collapse" data-target="#toc"><i class="fa fa-bars"></i></a>
	   <div id="toc" class="toc collapse in">
			<ol class="toc-article"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Official-AWS-Certification-Page"><span class="toc-article-text">Official AWS Certification Page</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#考试指南"><span class="toc-article-text">考试指南</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#视频学习"><span class="toc-article-text">视频学习</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#要点摘录"><span class="toc-article-text">要点摘录</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#Overview"><span class="toc-article-text">Overview</span></a></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#Monitoring-Metrics-amp-Analysis"><span class="toc-article-text">Monitoring, Metrics & Analysis</span></a></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#High-Availability"><span class="toc-article-text">High Availability</span></a></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#Deployment-and-Provisioning"><span class="toc-article-text">Deployment and Provisioning</span></a></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#Data-Management"><span class="toc-article-text">Data Management</span></a></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#OpsWorks"><span class="toc-article-text">OpsWorks</span></a></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#Security"><span class="toc-article-text">Security</span></a></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#Networking"><span class="toc-article-text">Networking</span></a></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#VPC’s"><span class="toc-article-text">VPC’s</span></a></li></ol></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#专项问题点"><span class="toc-article-text">专项问题点</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Doc"><span class="toc-article-text">Doc</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#User-Guide"><span class="toc-article-text">User Guide</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#FAQ"><span class="toc-article-text">FAQ</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#延伸"><span class="toc-article-text">延伸</span></a></li></ol>
		</div>
	
	</div>

	<!-- categories -->
    
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#categorys"><i class="fa fa-folder"></i></a>
    <ul id="categorys" class="tag_box list-unstyled collapse in">
          
  <li>
    <li><a href="/categories/AWS-Certified/">AWS Certified<span>4</span></a></li>
  </li>

    </ul>
	</div>
	

	<!-- tags -->
	
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"></i></a>
    <ul id="tags" class="tag_box list-unstyled collapse in">
	    
  <li><a href="/tags/Sysops/">Sysops<span>1</span></a></li> <li><a href="/tags/CloudWatch/">CloudWatch<span>1</span></a></li>
    </ul>
	</div>
	

    <hr>

</div><!-- col-md-3 -->

	</div>
		

</div><!-- row -->

<script type="text/javascript">
var disqus_shortname = 'jibing57-blog';
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2020 jibing57
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>

</body>
   </html>
