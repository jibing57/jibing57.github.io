<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Recording</title>
  
  <subtitle>Recording, Sharing, TimeSaving -- 一切成本皆时间</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.jibing57.com/"/>
  <updated>2019-05-30T08:10:12.753Z</updated>
  <id>https://www.jibing57.com/</id>
  
  <author>
    <name>jibing57</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>change to use https of blog in lightsail</title>
    <link href="https://www.jibing57.com/2019/05/30/change-to-use-https-of-blog-in-lightsail/"/>
    <id>https://www.jibing57.com/2019/05/30/change-to-use-https-of-blog-in-lightsail/</id>
    <published>2019-05-30T07:29:13.000Z</published>
    <updated>2019-05-30T08:10:12.753Z</updated>
    
    <summary type="html">
    
      
      
        &lt;ol&gt;
&lt;li&gt;&lt;p&gt;lightsail上开启443端口&lt;br&gt;&lt;img src=&quot;add_ssl_to_sg.png&quot; alt=&quot;add_ssl_to_sg.png&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;nginx configure&lt;/p&gt;
&lt;figure class=&quot;h
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>将hexo部署到AWS的Lightsail</title>
    <link href="https://www.jibing57.com/2019/05/29/how-to-deploy-hexo-to-aws-lightsail/"/>
    <id>https://www.jibing57.com/2019/05/29/how-to-deploy-hexo-to-aws-lightsail/</id>
    <published>2019-05-29T12:13:00.000Z</published>
    <updated>2019-05-30T05:35:19.442Z</updated>
    
    <summary type="html">
    
      &lt;h3 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h3&gt;&lt;p&gt;Github Pages的访问最近有些慢，感觉不太稳。最近正好买了台Lightsail，就考虑将blog丢到Lightsail上去, 试试Lightsail的访问速度。&lt;br&gt;整理了一下相关操作步骤，该步骤应该也同样适用于EC2。区别就是Lightsail默认配置了22和80端口是开放的。部署到EC2的话，需要自己设置Security Group开放22和80端口。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;步骤前提&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;本地已经有&lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;hexo&lt;/a&gt;环境&lt;/li&gt;
&lt;li&gt;有可用的&lt;a href=&quot;https://aws.amazon.com/lightsail/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Lightsail Instance&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;步骤中特定的信息，部署时可能需要根据自己实际情况进行修改&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Lightsail Instance相关:&lt;ul&gt;
&lt;li&gt;AMI是原生的&lt;/li&gt;
&lt;li&gt;Public IP是&lt;code&gt;54.203.178.195&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;博客目录&lt;code&gt;/opt/app/web/hexo&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;存放git库的账号名字为git, 博客git库代码存放目录:&lt;code&gt;/opt/app/git/hexo.git&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;本地信息&lt;ul&gt;
&lt;li&gt;本地系统是&lt;code&gt;Macos 10.14.4&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;以identity key而不是密码形式登录远端服务器&lt;ul&gt;
&lt;li&gt;此处在~/tmp/tmp/下新生成key，也可以按照实际要求修改为使用平时用的key&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="AWS" scheme="https://www.jibing57.com/categories/AWS/"/>
    
    
      <category term="Hexo" scheme="https://www.jibing57.com/tags/Hexo/"/>
    
      <category term="Lightsail" scheme="https://www.jibing57.com/tags/Lightsail/"/>
    
      <category term="Nginx" scheme="https://www.jibing57.com/tags/Nginx/"/>
    
      <category term="Git" scheme="https://www.jibing57.com/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Elastic Beanstalk Ruby Passenger平台下设置HTTP重定向到HTTPS</title>
    <link href="https://www.jibing57.com/2019/05/21/how-to-direct-http-to-https-in-elasticbeanstalk-ruby-passenger-platform/"/>
    <id>https://www.jibing57.com/2019/05/21/how-to-direct-http-to-https-in-elasticbeanstalk-ruby-passenger-platform/</id>
    <published>2019-05-21T13:12:23.000Z</published>
    <updated>2019-05-21T06:58:21.016Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;Elastic Beanstalk配置HTTPS后，接下来就需要配置HTTP请求redirect到HTTPS。&lt;br&gt;以前都是直接在application层面做redirect的。这次调查了一下在passenger层面来进行redirect的做法,记录在此。&lt;/p&gt;
&lt;h3 id=&quot;Ruby平台基本信息&quot;&gt;&lt;a href=&quot;#Ruby平台基本信息&quot; class=&quot;headerlink&quot; title=&quot;Ruby平台基本信息:&quot;&gt;&lt;/a&gt;Ruby平台基本信息:&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;EB平台: &lt;code&gt;Passenger with Ruby 2.3 running on 64bit Amazon Linux/2.9.3&lt;/code&gt;&lt;ul&gt;
&lt;li&gt;Ruby 2.3&lt;/li&gt;
&lt;li&gt;Passenger模式&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;前端使用ALB进行负载均衡，和后端EC2之间端口对应关系:&lt;ul&gt;
&lt;li&gt;ALB:443 -&amp;gt; EC2:80 (在ALB侧进行HTTPS terminate)&lt;/li&gt;
&lt;li&gt;ALB:80 -&amp;gt; EC2:80&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;修改方法&quot;&gt;&lt;a href=&quot;#修改方法&quot; class=&quot;headerlink&quot; title=&quot;修改方法&quot;&gt;&lt;/a&gt;修改方法&lt;/h3&gt;&lt;p&gt;使用&lt;code&gt;.ebextension&lt;/code&gt;直接修改passenger的配置文件&lt;code&gt;/opt/elasticbeanstalk/support/conf/nginx_config.erb&lt;/code&gt;.&lt;br&gt;修改要点:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;动态请求http_x_forwarded_proto 不是https的，redirect为https&lt;/li&gt;
&lt;li&gt;静态文件请求的http_x_forwarded_proto不是https的，redirect为https&lt;/li&gt;
&lt;li&gt;来自ELB health check的请求还是直接返回请求，而不用redirect为https&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
      <category term="AWS" scheme="https://www.jibing57.com/categories/AWS/"/>
    
    
      <category term="Elastic Beanstalk" scheme="https://www.jibing57.com/tags/Elastic-Beanstalk/"/>
    
      <category term="HTTP" scheme="https://www.jibing57.com/tags/HTTP/"/>
    
      <category term="HTTPS" scheme="https://www.jibing57.com/tags/HTTPS/"/>
    
  </entry>
  
  <entry>
    <title>如何在Elastic Load Balancer中添加SSL证书</title>
    <link href="https://www.jibing57.com/2019/05/16/how-to-add-SSL-Certification-to-Elastic-Load-Balancer/"/>
    <id>https://www.jibing57.com/2019/05/16/how-to-add-SSL-Certification-to-Elastic-Load-Balancer/</id>
    <published>2019-05-16T13:51:28.000Z</published>
    <updated>2019-05-16T09:03:19.676Z</updated>
    
    <summary type="html">
    
      &lt;h3 id=&quot;上传方式&quot;&gt;&lt;a href=&quot;#上传方式&quot; class=&quot;headerlink&quot; title=&quot;上传方式&quot;&gt;&lt;/a&gt;上传方式&lt;/h3&gt;&lt;p&gt;AWS侧上传HTTPS证书有两种方式&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;使用 AWS Certificate Manager (ACM)生成，优点是免费，和aws其他服务集成性好，缺点是只能在AWS中使用&lt;/li&gt;
&lt;li&gt;上传第三方证书到AWS Identity and Access Management (IAM) 中，优点是证书生成灵活，缺点是操作麻烦。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;中国区的AWS还没有ACM服务，因此只能使用IAM的方式来上传证书。&lt;/p&gt;
&lt;h3 id=&quot;证书相关的一系列命令&quot;&gt;&lt;a href=&quot;#证书相关的一系列命令&quot; class=&quot;headerlink&quot; title=&quot;证书相关的一系列命令&quot;&gt;&lt;/a&gt;证书相关的一系列命令&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;证书上传命令&lt;br&gt;如果没有&lt;code&gt;certificate-chain&lt;/code&gt;，可以不传。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ aws iam upload-server-certificate --server-certificate-name ExampleCertificate &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                                    --certificate-body file://Certificate.pem &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                                    --certificate-chain file://CertificateChain.pem &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                                    --private-key file://PrivateKey.pem&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;列出证书命令&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ aws iam list-server-certificates&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;获取证书信息命令&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ aws iam get-server-certificate --server-certificate-name ExampleCertificate&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;删除证书命令&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ aws iam delete-server-certificate --server-certificate-name ExampleCertificate&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
      <category term="AWS" scheme="https://www.jibing57.com/categories/AWS/"/>
    
    
      <category term="Elastic Load Balancing" scheme="https://www.jibing57.com/tags/Elastic-Load-Balancing/"/>
    
      <category term="IAM" scheme="https://www.jibing57.com/tags/IAM/"/>
    
      <category term="Application Load Balancing" scheme="https://www.jibing57.com/tags/Application-Load-Balancing/"/>
    
      <category term="HTTP" scheme="https://www.jibing57.com/tags/HTTP/"/>
    
  </entry>
  
  <entry>
    <title>在Mac下修改Office的界面显示语言</title>
    <link href="https://www.jibing57.com/2019/05/10/how-to-change-office-UI-language-on-macos/"/>
    <id>https://www.jibing57.com/2019/05/10/how-to-change-office-UI-language-on-macos/</id>
    <published>2019-05-10T11:47:18.000Z</published>
    <updated>2019-05-10T03:15:18.986Z</updated>
    
    <summary type="html">
    
      &lt;h3 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概述&quot;&gt;&lt;/a&gt;概述&lt;/h3&gt;&lt;p&gt;在Macos中，微软的Office套件的UI，是根据系统默认语言来设置的。系统是中文，Office就是中文UI，系统是英文，Office就是英文UI。微软并没有在Office的偏好设置中，设置一个可以切换语言的设置。&lt;br&gt;这让我这种想保持系统英文，Office中文的人感到很难受。&lt;br&gt;官网上搜了一圈，都没有找到可用的办法。功夫不负有心人，最终在office社区里面的这篇帖子提供了解决办法&lt;a href=&quot;https://answers.microsoft.com/en-us/msoffice/forum/msoffice_other-mso_mac-mso_mac2016/how-to-manually-change-the-language-used-in-office/abe2a9c1-f550-45de-9d0e-58b99f206c41?page=2&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;How to manually change the language used in Office for Mac 2016 without changing OS language?&lt;/a&gt;, 还是我最喜欢的命令行方式。虽然是15，16年的帖子，但是对应的方法，在最新版的Office(版本16.24-19041401)中仍然可用。&lt;/p&gt;
&lt;h3 id=&quot;修改方法&quot;&gt;&lt;a href=&quot;#修改方法&quot; class=&quot;headerlink&quot; title=&quot;修改方法&quot;&gt;&lt;/a&gt;修改方法&lt;/h3&gt;&lt;p&gt;以work为例，记录相关命令如下:&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;# 修改word的语言&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ defaults write com.microsoft.Word AppleLanguages &amp;apos;(&amp;quot;zh-cn&amp;quot;)&amp;apos;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;# 读取word的设置, 可以看到多了一个AppleLanguages的选项。&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ defaults read com.microsoft.Word&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    AppleLanguages =     (&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;quot;zh-cn&amp;quot;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    );&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Tools" scheme="https://www.jibing57.com/categories/Tools/"/>
    
    
      <category term="Office" scheme="https://www.jibing57.com/tags/Office/"/>
    
  </entry>
  
  <entry>
    <title>Macos下制作CentOS 7 USB启动盘</title>
    <link href="https://www.jibing57.com/2019/05/01/way-to-make-centos7-bootable-usb-on-macos/"/>
    <id>https://www.jibing57.com/2019/05/01/way-to-make-centos7-bootable-usb-on-macos/</id>
    <published>2019-05-01T04:02:57.000Z</published>
    <updated>2019-05-04T03:38:17.642Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;记录下在MacOS中制作Linux USB启动盘的操作步骤。&lt;/p&gt;
&lt;h3 id=&quot;操作步骤&quot;&gt;&lt;a href=&quot;#操作步骤&quot; class=&quot;headerlink&quot; title=&quot;操作步骤&quot;&gt;&lt;/a&gt;操作步骤&lt;/h3&gt;&lt;h4 id=&quot;查看磁盘挂载分区&quot;&gt;&lt;a href=&quot;#查看磁盘挂载分区&quot; class=&quot;headerlink&quot; title=&quot;查看磁盘挂载分区&quot;&gt;&lt;/a&gt;查看磁盘挂载分区&lt;/h4&gt;&lt;p&gt;使用命令&lt;code&gt;diskutil list&lt;/code&gt;查看所在U盘的分区，找到U盘的挂载点，此处挂载点为&lt;code&gt;/dev/disk2&lt;/code&gt;&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ diskutil list&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;...&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;/dev/disk2 (external, physical):&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;   #:                       TYPE NAME                    SIZE       IDENTIFIER&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;   0:     FDisk_partition_scheme                        *31.0 GB    disk2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;   1:                 DOS_FAT_32 UNTITLED                31.0 GB    disk2s1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&quot;卸载U盘挂载&quot;&gt;&lt;a href=&quot;#卸载U盘挂载&quot; class=&quot;headerlink&quot; title=&quot;卸载U盘挂载&quot;&gt;&lt;/a&gt;卸载U盘挂载&lt;/h4&gt;&lt;p&gt;使用&lt;code&gt;diskutil unmountDisk&lt;/code&gt;命令，卸载U盘的挂载。&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ diskutil unmountDisk /dev/disk2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Unmount of all volumes on disk2 was successful&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;如果不卸载挂载点就写入启动盘，则会提示&lt;code&gt;dd: /dev/disk2: Resource busy&lt;/code&gt;。&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://www.jibing57.com/categories/Linux/"/>
    
    
      <category term="CentOS" scheme="https://www.jibing57.com/tags/CentOS/"/>
    
      <category term="MacOS" scheme="https://www.jibing57.com/tags/MacOS/"/>
    
  </entry>
  
  <entry>
    <title>AWS Autuscaling的Scheduled Scaling(计划扩展)</title>
    <link href="https://www.jibing57.com/2019/05/01/scheduled-action-of-aws-autoscaling/"/>
    <id>https://www.jibing57.com/2019/05/01/scheduled-action-of-aws-autoscaling/</id>
    <published>2019-05-01T02:49:04.000Z</published>
    <updated>2019-05-01T03:55:22.111Z</updated>
    
    <summary type="html">
    
      &lt;h3 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h3&gt;&lt;p&gt;除了用Alarm触发的Scaling Policy，AWS Autoscaling(ASG) 还提供了一个Scheduled Scaling(计划扩展)的功能。该功能主要用作一些流量可预测的情形。比如国外的Black Friday和国内6.18或双11这种活动时，就可以使用Scheduled Scaling来提前规划好机器数量。&lt;br&gt;详细说明和设置参见 AWS官方文档&lt;a href=&quot;https://docs.aws.amazon.com/autoscaling/ec2/userguide/schedule_time.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Scheduled Scaling for Amazon EC2 Auto Scaling&lt;/a&gt;。&lt;/p&gt;
&lt;h3 id=&quot;例子&quot;&gt;&lt;a href=&quot;#例子&quot; class=&quot;headerlink&quot; title=&quot;例子&quot;&gt;&lt;/a&gt;例子&lt;/h3&gt;&lt;p&gt;举基于如下场景的一个例子&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;正常流量下，2台服务器就可以支撑。&lt;/li&gt;
&lt;li&gt;周一到周五的早上8点~10点间是流量高峰期，此时需要4台服务器才能支撑对应的流量。&lt;/li&gt;
&lt;li&gt;10点过后恢复正常流量。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;如上场景分解为2个Schedule Action&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;周一到周五每天早上8点，扩展服务器数量为4.&lt;/li&gt;
&lt;li&gt;周一到周五每天早上10点，缩减服务器数量为2.&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
      <category term="AWS" scheme="https://www.jibing57.com/categories/AWS/"/>
    
    
      <category term="AutoScaling" scheme="https://www.jibing57.com/tags/AutoScaling/"/>
    
  </entry>
  
  <entry>
    <title>MacOS上VMWare Fusion中如何给网口设置固定IP</title>
    <link href="https://www.jibing57.com/2019/04/28/how-to-use-static-IP-in-VMWare-Fusion-on-Mac-OS-X/"/>
    <id>https://www.jibing57.com/2019/04/28/how-to-use-static-IP-in-VMWare-Fusion-on-Mac-OS-X/</id>
    <published>2019-04-28T13:29:09.000Z</published>
    <updated>2019-04-29T02:19:53.506Z</updated>
    
    <summary type="html">
    
      &lt;h3 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h3&gt;&lt;p&gt;VMWare Fusion中，虚拟机的网口使用NAT模式时，获取到的IP地址是通过DHCP动态分配的，不是固定分配的。每次开机虚拟机网口IP都有可能变动，SSH登录时每次要去查看，太不方便。&lt;br&gt;找了下如何设置固定IP的方法，记录如下。&lt;/p&gt;
&lt;p&gt;在如下环境中可以设置成功:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;MacOS Version: 10.14.4 (18E226)&lt;/li&gt;
&lt;li&gt;Vmware Fusion Version: 10.1.5 (10950653)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;步骤&quot;&gt;&lt;a href=&quot;#步骤&quot; class=&quot;headerlink&quot; title=&quot;步骤&quot;&gt;&lt;/a&gt;步骤&lt;/h3&gt;&lt;h4 id=&quot;1-获取虚拟主机的MAC地址&quot;&gt;&lt;a href=&quot;#1-获取虚拟主机的MAC地址&quot; class=&quot;headerlink&quot; title=&quot;1. 获取虚拟主机的MAC地址&quot;&gt;&lt;/a&gt;1. 获取虚拟主机的MAC地址&lt;/h4&gt;&lt;p&gt;默认安装下，所有的虚拟主机的Image都存放在&lt;code&gt;~/Documents/Virtual\ Machines.localized/&lt;/code&gt;下，以名为&lt;code&gt;CentOS 7 64bit&lt;/code&gt;的虚拟机为例。获取命令为:&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;cat ~/Documents/Virtual\ Machines.localized/CentOS\ 7\ 64bit.vmwarevm/CentOS\ 7\ 64bit.vmx | grep generatedAddress&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;找到对应网口的MAC地址, 本文中要绑定的网口&lt;code&gt;ethernet0&lt;/code&gt;的MAC地址为&lt;code&gt;00:0C:29:23:6E:CC&lt;/code&gt;。&lt;/p&gt;
&lt;h4 id=&quot;2-设置静态IP&quot;&gt;&lt;a href=&quot;#2-设置静态IP&quot; class=&quot;headerlink&quot; title=&quot;2. 设置静态IP&quot;&gt;&lt;/a&gt;2. 设置静态IP&lt;/h4&gt;&lt;p&gt;打开配置文件&lt;code&gt;/Library/Preferences/VMware\ Fusion/vmnet8/dhcpd.conf&lt;/code&gt;, &lt;code&gt;vmnet8&lt;/code&gt;是VMWare用来设置NAT的虚拟网口，在MacOS下使用命令&lt;code&gt;ifconfig&lt;/code&gt;可以看到该虚拟网口。&lt;/p&gt;
&lt;p&gt;在配置文件中可以看到DHCP的IP池为192.168.187.128 ~ 192.168.187.254(每个机器可能不同，以实际显示的为准)&lt;br&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://www.jibing57.com/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://www.jibing57.com/tags/Linux/"/>
    
      <category term="VMware" scheme="https://www.jibing57.com/tags/VMware/"/>
    
  </entry>
  
  <entry>
    <title>Vmware Fusion中CentOS 7中安装Vmware Tools</title>
    <link href="https://www.jibing57.com/2019/04/26/manually-install-vmeare-tools-on-centos-7/"/>
    <id>https://www.jibing57.com/2019/04/26/manually-install-vmeare-tools-on-centos-7/</id>
    <published>2019-04-26T13:07:10.000Z</published>
    <updated>2019-04-26T07:59:16.464Z</updated>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;安装步骤&quot;&gt;&lt;a href=&quot;#安装步骤&quot; class=&quot;headerlink&quot; title=&quot;安装步骤&quot;&gt;&lt;/a&gt;安装步骤&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;虚拟机状态栏中选择 &lt;strong&gt;虚拟机 &amp;gt; 安装Vmware Tools&lt;/strong&gt;&lt;br&gt;期间
      
    
    </summary>
    
      <category term="Tools" scheme="https://www.jibing57.com/categories/Tools/"/>
    
    
      <category term="Linux" scheme="https://www.jibing57.com/tags/Linux/"/>
    
      <category term="CentOS" scheme="https://www.jibing57.com/tags/CentOS/"/>
    
      <category term="VMware" scheme="https://www.jibing57.com/tags/VMware/"/>
    
  </entry>
  
  <entry>
    <title>Command Tips</title>
    <link href="https://www.jibing57.com/2019/04/26/command-tips/"/>
    <id>https://www.jibing57.com/2019/04/26/command-tips/</id>
    <published>2019-04-26T05:22:40.000Z</published>
    <updated>2019-05-27T05:26:35.549Z</updated>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;git-branch-不要分页&quot;&gt;&lt;a href=&quot;#git-branch-不要分页&quot; class=&quot;headerlink&quot; title=&quot;git branch 不要分页&quot;&gt;&lt;/a&gt;git branch 不要分页&lt;/h3&gt;&lt;p&gt;设置git branch不分页显示&lt;
      
    
    </summary>
    
      <category term="Tools" scheme="https://www.jibing57.com/categories/Tools/"/>
    
    
      <category term="Linux" scheme="https://www.jibing57.com/tags/Linux/"/>
    
      <category term="MacOS" scheme="https://www.jibing57.com/tags/MacOS/"/>
    
  </entry>
  
  <entry>
    <title>Niu-X resource</title>
    <link href="https://www.jibing57.com/2019/04/20/niu-x-resource/"/>
    <id>https://www.jibing57.com/2019/04/20/niu-x-resource/</id>
    <published>2019-04-20T07:04:47.000Z</published>
    <updated>2019-05-05T03:34:53.488Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;记录一些有用的网站，持续更新中。。&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&quot;Linux-command&quot;&gt;&lt;a href=&quot;#Linux-command&quot; class=&quot;headerlink&quot; title=&quot;Linux-command&quot;&gt;&lt;/a&gt;Linux-command&lt;/h3&gt;&lt;p&gt;github地址: &lt;a href=&quot;https://github.com/jaywcjlove/linux-command&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;linux-command&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Linux命令大全搜索工具，内容包含Linux命令手册、详解、学习、搜集 &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;比较系统的各个命令，期待有空时每个粗略一遍，需要时再来查询&lt;/p&gt;
    
    </summary>
    
      <category term="Tools" scheme="https://www.jibing57.com/categories/Tools/"/>
    
    
      <category term="Linux" scheme="https://www.jibing57.com/tags/Linux/"/>
    
      <category term="MacOS" scheme="https://www.jibing57.com/tags/MacOS/"/>
    
      <category term="Github" scheme="https://www.jibing57.com/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>firewall-cmd基本用法</title>
    <link href="https://www.jibing57.com/2019/04/20/firewall-cmd-basic-usage/"/>
    <id>https://www.jibing57.com/2019/04/20/firewall-cmd-basic-usage/</id>
    <published>2019-04-20T01:49:23.000Z</published>
    <updated>2019-05-08T02:37:04.363Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;还需要装个虚拟机，重新敲命令，拷贝输出内容或者截图&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;安装和管理firewalld&quot;&gt;&lt;a href=&quot;#安装和管理firewalld&quot; class=&quot;headerlink&quot; title=&quot;安装和管理firewalld&quot;&gt;&lt;/a&gt;安装和管理firewalld&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;# 安装firewalld&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;yum install firewalld firewall-config&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;systemctl start  firewalld # 启动&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;systemctl status firewalld # 或者 firewall-cmd --state 查看状态&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;systemctl stop firewalld  # 停止&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;systemctl enable firewalld # 开机自自动&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;systemctl disable firewalld # 取消自启动&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;systemctl list-unit-files | grep firewalld # 查看是否开机自启动&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;基础命令&quot;&gt;&lt;a href=&quot;#基础命令&quot; class=&quot;headerlink&quot; title=&quot;基础命令&quot;&gt;&lt;/a&gt;基础命令&lt;/h3&gt;&lt;p&gt;一些常用的命令如下:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;查看防火墙状态&lt;br&gt;命令: &lt;code&gt;firewall-cmd --list-all&lt;/code&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ sudo firewall-cmd --list-all&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;public (active)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  target: default&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  icmp-block-inversion: no&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  interfaces: ens33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  sources:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  services: ssh dhcpv6-client&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  ports:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  protocols:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  masquerade: no&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  forward-ports:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  source-ports:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  icmp-blocks:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  rich rules:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Tools" scheme="https://www.jibing57.com/categories/Tools/"/>
    
    
      <category term="Linux" scheme="https://www.jibing57.com/tags/Linux/"/>
    
      <category term="Firewall" scheme="https://www.jibing57.com/tags/Firewall/"/>
    
  </entry>
  
  <entry>
    <title>解析EB logs的一些Linux小命令</title>
    <link href="https://www.jibing57.com/2019/04/08/some-command-to-parse-EB-logs/"/>
    <id>https://www.jibing57.com/2019/04/08/some-command-to-parse-EB-logs/</id>
    <published>2019-04-08T13:12:11.000Z</published>
    <updated>2019-04-08T08:59:24.000Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;开启EB rotated log功能后，EB的日志将会被存储在EB对应bucket的&lt;code&gt;resources/environments/logs/logtype/environment-id/instance-id&lt;/code&gt;路径下, 供后续查看。官网文档&lt;a href=&quot;https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/using-features.logging.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Viewing Logs from Amazon EC2 Instances in Your Elastic Beanstalk Environment&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;下面记录几个常用检查日志的小命令&lt;/p&gt;
&lt;h3 id=&quot;使用exclue和include来获取部分日志&quot;&gt;&lt;a href=&quot;#使用exclue和include来获取部分日志&quot; class=&quot;headerlink&quot; title=&quot;使用exclue和include来获取部分日志&quot;&gt;&lt;/a&gt;使用exclue和include来获取部分日志&lt;/h3&gt;&lt;p&gt;开启EB的rotated log后，EB中的EC2会每小时将日志上传到S3中。以&lt;code&gt;Passenger with Ruby&lt;/code&gt;的Platform为例，有production.log, access.log和passenger.log三种文件会被传到S3中，文件名格式:&lt;code&gt;文件路径&lt;/code&gt;+&lt;code&gt;时间戳&lt;/code&gt;+&lt;code&gt;gz&lt;/code&gt;的格式&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ ls *log1554688861.gz*&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;_var_app_support_logs_rotated_access.log1554688861.gz  &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;_var_app_support_logs_rotated_passenger.log1554688861.gz  &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;_var_app_support_logs_rotated_production.log1554688861.gz&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Bucket下的日志，默认不会自动清理，日积月累,instance-id路径下的文件会越来越多，而目前aws cli的&lt;code&gt;s3 cp&lt;/code&gt;或&lt;code&gt;s3 sync&lt;/code&gt;,并没有提供根据创建时间的filter,有时候获取固定哪段时间的文件就不太方便。&lt;br&gt;
    
    </summary>
    
      <category term="AWS" scheme="https://www.jibing57.com/categories/AWS/"/>
    
    
      <category term="Elastic Beanstalk" scheme="https://www.jibing57.com/tags/Elastic-Beanstalk/"/>
    
      <category term="S3" scheme="https://www.jibing57.com/tags/S3/"/>
    
      <category term="AWS CLI" scheme="https://www.jibing57.com/tags/AWS-CLI/"/>
    
      <category term="Linux" scheme="https://www.jibing57.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>AWS EC2中开启BBR</title>
    <link href="https://www.jibing57.com/2019/04/02/bbr-on-aws-ec2/"/>
    <id>https://www.jibing57.com/2019/04/02/bbr-on-aws-ec2/</id>
    <published>2019-04-02T13:06:46.000Z</published>
    <updated>2019-04-03T11:28:17.000Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;官网中关于如何在EC2中开启BBR的说明。&lt;a href=&quot;https://aws.amazon.com/amazon-linux-ami/2017.09-release-notes/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Amazon Linux AMI 2017.09 Release Notes&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;开启方法&quot;&gt;&lt;a href=&quot;#开启方法&quot; class=&quot;headerlink&quot; title=&quot;开启方法&quot;&gt;&lt;/a&gt;开启方法&lt;/h3&gt;&lt;p&gt;开启方法摘录如下:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The Kernel has been updated to latest 4.9.y stable tree, new ENA driver 1.3.0 as well as support for TCP Bottleneck Bandwidth and RTT (BBR) which improve network performance.&lt;br&gt;BBR is not enabled by default. You can enable it on your EC2 Instance via:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ sudo modprobe tcp_bbr&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ sudo modprobe sch_fq&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ sudo sysctl -w net.ipv4.tcp_congestion_control=bbr&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Persistent configuration should look like:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;$ sudo su -&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;# cat &amp;lt;&amp;lt;EOF&amp;gt;&amp;gt; /etc/sysconfig/modules/tcpcong.modules  &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;gt;#!/bin/bash&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;gt; exec /sbin/modprobe tcp_bbr &amp;gt;/dev/null 2&amp;gt;&amp;amp;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;gt; exec /sbin/modprobe sch_fq &amp;gt;/dev/null 2&amp;gt;&amp;amp;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;gt; EOF&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;# chmod 755 /etc/sysconfig/modules/tcpcong.modules&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;# echo &amp;quot;net.ipv4.tcp_congestion_control = bbr&amp;quot; &amp;gt;&amp;gt; /etc/sysctl.d/00-tcpcong.conf&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="AWS" scheme="https://www.jibing57.com/categories/AWS/"/>
    
    
      <category term="EC2" scheme="https://www.jibing57.com/tags/EC2/"/>
    
      <category term="Network" scheme="https://www.jibing57.com/tags/Network/"/>
    
  </entry>
  
  <entry>
    <title>Mac下共享ShadowsocksX-NG的梯子给iOS</title>
    <link href="https://www.jibing57.com/2019/03/24/share-ShadowsocksX-NG-to-iOS/"/>
    <id>https://www.jibing57.com/2019/03/24/share-ShadowsocksX-NG-to-iOS/</id>
    <published>2019-03-24T13:16:46.000Z</published>
    <updated>2019-03-26T02:58:38.000Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;提供一个Mac下共享&lt;code&gt;ShadowsocksX-NG&lt;/code&gt;(小飞机)梯子给iPhone的方法。&lt;/p&gt;
&lt;h3 id=&quot;Mac端设置&quot;&gt;&lt;a href=&quot;#Mac端设置&quot; class=&quot;headerlink&quot; title=&quot;Mac端设置&quot;&gt;&lt;/a&gt;Mac端设置&lt;/h3&gt;&lt;p&gt;打开小飞机的“偏好设置”，切换到HTTP一栏，其中的HTTP代理监听地址默认是127.0.0.1，将其改成0.0.0.0。保留默认的1087或改为自己想要设置的端口，并勾选“开启HTTP代理服务器”。&lt;br&gt;&lt;img src=&quot;/images/ShadowSock/shadowsock_http_proxy.png&quot; alt=&quot;shadowsock_http_proxy.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;Terminal中输入&lt;code&gt;ifconfig&lt;/code&gt;查看Mac的IP地址, 供iPhone设置时使用。此处是&lt;code&gt;192.168.3.18&lt;/code&gt;&lt;br&gt;
    
    </summary>
    
      <category term="Tools" scheme="https://www.jibing57.com/categories/Tools/"/>
    
    
      <category term="MacOS" scheme="https://www.jibing57.com/tags/MacOS/"/>
    
      <category term="iOS" scheme="https://www.jibing57.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>CentOS 7下Ctrl-C失效问题</title>
    <link href="https://www.jibing57.com/2019/03/21/ctrl-c-invalid-on-Centos-7/"/>
    <id>https://www.jibing57.com/2019/03/21/ctrl-c-invalid-on-Centos-7/</id>
    <published>2019-03-21T13:33:01.000Z</published>
    <updated>2019-04-02T12:30:29.000Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;rvm 1.29.4在CentOS 7上有一个bug，在Bash下，source了rvm后，执行Crtl+C时，无法终止shell命令。&lt;/p&gt;
&lt;p&gt;具体讨论在&lt;a href=&quot;https://github.com/rvm/rvm/issues/4422&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Unable to pass SIGINT signal (control-C) on 1.29.4 &lt;/a&gt;中。&lt;/p&gt;
&lt;p&gt;解决办法:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;在用户账号下强制使用trap设置回被改写的信号量INT QUIT&lt;/li&gt;
&lt;li&gt;升级rvm到1.29.4以上版本&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
      <category term="Shell" scheme="https://www.jibing57.com/categories/Shell/"/>
    
    
      <category term="Ruby" scheme="https://www.jibing57.com/tags/Ruby/"/>
    
      <category term="Linux" scheme="https://www.jibing57.com/tags/Linux/"/>
    
      <category term="CentOS" scheme="https://www.jibing57.com/tags/CentOS/"/>
    
      <category term="RVM" scheme="https://www.jibing57.com/tags/RVM/"/>
    
  </entry>
  
  <entry>
    <title>使用nginx处理S3静态资源</title>
    <link href="https://www.jibing57.com/2019/03/11/ways-to-support-public-s3-file-in-nginx/"/>
    <id>https://www.jibing57.com/2019/03/11/ways-to-support-public-s3-file-in-nginx/</id>
    <published>2019-03-11T13:28:17.000Z</published>
    <updated>2019-03-22T06:02:39.000Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;在网页或APP中，使用S3公开的静态资源，比如图片,小视频等。通常有这么几个常用的方式&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;直接在页面中使用S3的public链接&lt;/li&gt;
&lt;li&gt;使用自己的域名，再在Web服务器侧redirect到S3的链接&lt;/li&gt;
&lt;li&gt;使用自己的域名，再在服务器上经过反向代理服务，获取S3内容后再返回给客户端或浏览器。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在APP中，因为不需要考虑SEO，可以在页面或接口中直接返回S3的链接，APP直接访问S3资源，效率最高。&lt;br&gt;如果是网页，有时候为了SEO的需要，可能更多的会采用第二和第三种方式, 将资源经过服务器来中转一下。&lt;br&gt;下面介绍一下第二和第三种方式在Nginx侧的简单实现。&lt;/p&gt;
&lt;h3 id=&quot;使用Nginx来redirect-S3的链接&quot;&gt;&lt;a href=&quot;#使用Nginx来redirect-S3的链接&quot; class=&quot;headerlink&quot; title=&quot;使用Nginx来redirect S3的链接&quot;&gt;&lt;/a&gt;使用Nginx来redirect S3的链接&lt;/h3&gt;&lt;p&gt;如下是一个简单的Nginx的配置的例子。基于以下几个前提&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;测试域名为test.jibing57.com&lt;/li&gt;
&lt;li&gt;所有放在S3上的静态文件，在网站上都以&lt;code&gt;/s3_redirect&lt;/code&gt;路径打头&lt;/li&gt;
&lt;li&gt;S3 Region为us-west-2, Bucket 为&lt;code&gt;s3-for-blog&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;将&lt;code&gt;/s3_redirect&lt;/code&gt;开头的文件redirect到真实的S3 URL中。&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="AWS" scheme="https://www.jibing57.com/categories/AWS/"/>
    
    
      <category term="S3" scheme="https://www.jibing57.com/tags/S3/"/>
    
      <category term="Linux" scheme="https://www.jibing57.com/tags/Linux/"/>
    
      <category term="HTTP" scheme="https://www.jibing57.com/tags/HTTP/"/>
    
      <category term="Nginx" scheme="https://www.jibing57.com/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>CentOS 7下passenger-status报错</title>
    <link href="https://www.jibing57.com/2019/03/10/passenger-status-not-work-on-CentOS-7/"/>
    <id>https://www.jibing57.com/2019/03/10/passenger-status-not-work-on-CentOS-7/</id>
    <published>2019-03-10T07:21:36.000Z</published>
    <updated>2019-03-11T07:32:17.000Z</updated>
    
    <summary type="html">
    
      &lt;h3 id=&quot;问题&quot;&gt;&lt;a href=&quot;#问题&quot; class=&quot;headerlink&quot; title=&quot;问题&quot;&gt;&lt;/a&gt;问题&lt;/h3&gt;&lt;p&gt;CentOS 7中，执行&lt;code&gt;passenger-status&lt;/code&gt;报了如下错误:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;ERROR: Phusion Passenger doesn&amp;apos;t seem to be running. If you are sure that it is running, then the causes of this problem could be:&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;1. You customized the instance registry directory using Apache&amp;apos;s PassengerInstanceRegistryDir option, Nginx&amp;apos;s passenger_instance_registry_dir option, or Phusion Passenger Standalone&amp;apos;s --instance-registry-dir command line argument. If so, please set the environment variable PASSENGER_INSTANCE_REGISTRY_DIR to that directory and run passenger-status again.&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2. The instance directory has been removed by an operating system background service. Please set a different instance registry directory using Apache&amp;apos;s PassengerInstanceRegistryDir option, Nginx&amp;apos;s passenger_instance_registry_dir option, or Phusion Passenger Standalone&amp;apos;s --instance-registry-dir command line argument.&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;而命令&lt;code&gt;passenger-memory-stats&lt;/code&gt;可以正常工作。&lt;/p&gt;
&lt;p&gt;同样的问题，在Amazon Linux 2 AMI中也同样存在。&lt;/p&gt;
    
    </summary>
    
      <category term="AWS" scheme="https://www.jibing57.com/categories/AWS/"/>
    
    
      <category term="EC2" scheme="https://www.jibing57.com/tags/EC2/"/>
    
      <category term="Passenger" scheme="https://www.jibing57.com/tags/Passenger/"/>
    
      <category term="Nginx" scheme="https://www.jibing57.com/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>Macos下因为找不到libxml2而导致nokogiri安装失败的解决办法</title>
    <link href="https://www.jibing57.com/2019/03/05/how-resolve-nokogiri-failed-by-xml2-on-macos/"/>
    <id>https://www.jibing57.com/2019/03/05/how-resolve-nokogiri-failed-by-xml2-on-macos/</id>
    <published>2019-03-05T08:26:53.000Z</published>
    <updated>2019-04-21T00:42:31.000Z</updated>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天要跑一个其他的rails项目，为了不污染原先的gemset。就重建了一个gemset, 但是bundle install的时候，安装nokogiri 1.8.4一直失败。&lt;br&gt;系统版本是Macos 10.13 High Sierra中, ruby版本是rvm安装的ru
      
    
    </summary>
    
      <category term="Code" scheme="https://www.jibing57.com/categories/Code/"/>
    
    
      <category term="Ruby" scheme="https://www.jibing57.com/tags/Ruby/"/>
    
      <category term="Rails" scheme="https://www.jibing57.com/tags/Rails/"/>
    
      <category term="MacOS" scheme="https://www.jibing57.com/tags/MacOS/"/>
    
  </entry>
  
  <entry>
    <title>Nginx的HTTP Code444和307设置</title>
    <link href="https://www.jibing57.com/2019/02/28/nginx_444_and_307/"/>
    <id>https://www.jibing57.com/2019/02/28/nginx_444_and_307/</id>
    <published>2019-02-28T13:50:59.000Z</published>
    <updated>2019-03-07T12:33:09.000Z</updated>
    
    <summary type="html">
    
      &lt;h3 id=&quot;nginx-444&quot;&gt;&lt;a href=&quot;#nginx-444&quot; class=&quot;headerlink&quot; title=&quot;nginx 444&quot;&gt;&lt;/a&gt;nginx 444&lt;/h3&gt;&lt;h4 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h4&gt;&lt;p&gt;当没有显式指定default server的时候，Nginx会使用第一个server来作为默认的响应server，即使请求的Host并没有匹配到server_name。&lt;br&gt;这是为了兼容老旧的一些不带Host的HTTP请求而做的设置。官文描述: &lt;a href=&quot;http://nginx.org/en/docs/http/request_processing.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;How nginx processes a request&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;此时可能存在一定的风险。如果有非备案的名解析到了你的Public IP上，而你的Web服务对该域名的请求有所响应的话，可能会导致Public IP被运营商封锁。&lt;/p&gt;
&lt;h4 id=&quot;解决办法&quot;&gt;&lt;a href=&quot;#解决办法&quot; class=&quot;headerlink&quot; title=&quot;解决办法:&quot;&gt;&lt;/a&gt;解决办法:&lt;/h4&gt;&lt;p&gt;在nginx中添加一个default server，并在default server中设置&lt;code&gt;return 444;&lt;/code&gt;。此时Nginx就不会响应请求，除非请求的Host是配置的。&lt;br&gt;
    
    </summary>
    
      <category term="Tools" scheme="https://www.jibing57.com/categories/Tools/"/>
    
    
      <category term="HTTP" scheme="https://www.jibing57.com/tags/HTTP/"/>
    
      <category term="Nginx" scheme="https://www.jibing57.com/tags/Nginx/"/>
    
  </entry>
  
</feed>
